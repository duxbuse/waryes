<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Stellar Siege — Planetary Conflict</title>
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=Playfair+Display+SC:wght@400;700;900&family=Crimson+Pro:wght@300;400;600;700&family=Share+Tech+Mono&display=swap" rel="stylesheet">
<style>
/* ============================================================
   STELLAR SIEGE — COMBINED MAXIMALIST THEME
   Battle Barge Bridge + Gothic Flourishes + Warp Glitch + Heavy Animation
   ============================================================ */

/* --- CSS RESET & ROOT VARIABLES --- */
*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

:root {
  /* Gunmetal & Steel */
  --steel-dark: #1a1a20;
  --steel-mid: #2a2a30;
  --steel-light: #3a3a42;
  --steel-highlight: #4a4a55;
  --steel-bright: #5a5a68;
  /* Electric Blue */
  --blue-primary: #00aaff;
  --blue-dark: #0088dd;
  --blue-glow: #00ccff;
  --blue-dim: #005588;
  /* Amber Warning */
  --amber: #ff8800;
  --amber-light: #ffaa00;
  --amber-glow: #ffcc44;
  --amber-dim: #885500;
  /* Danger Red */
  --red: #ff2200;
  --red-glow: #ff4444;
  --red-dim: #881100;
  /* Hologram Cyan */
  --cyan: #00ffcc;
  --cyan-dim: #008866;
  /* Gothic Gold */
  --gold: #c4a44a;
  --gold-light: #d4b85a;
  --gold-bright: #e8d080;
  --gold-dim: #8a7030;
  /* Warp Corruption */
  --warp-purple: #8800ff;
  --warp-pink: #ff00aa;
  --warp-green: #00ff88;
  /* Fonts */
  --font-heading: 'Cinzel', serif;
  --font-body: 'Crimson Pro', serif;
  --font-mono: 'Share Tech Mono', monospace;
}

html, body {
  width: 100%; height: 100%;
  overflow-x: hidden;
  background: #000;
  color: #c0c0cc;
  font-family: var(--font-body);
  font-size: 15px;
  line-height: 1.5;
}

/* Scrollbar Styling */
::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: var(--steel-dark); }
::-webkit-scrollbar-thumb { background: var(--steel-highlight); border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background: var(--blue-dim); }

/* --- GLOBAL OVERLAYS --- */

/* CRT Vignette */
.crt-vignette {
  position: fixed; inset: 0; z-index: 9999;
  pointer-events: none;
  background: radial-gradient(ellipse at center, transparent 55%, rgba(0,0,0,0.5) 100%);
}

/* Scan Lines */
.scan-lines {
  position: fixed; inset: 0; z-index: 9998;
  pointer-events: none;
  background: repeating-linear-gradient(
    0deg,
    transparent 0px,
    transparent 2px,
    rgba(0, 170, 255, 0.012) 2px,
    rgba(0, 170, 255, 0.012) 4px
  );
  animation: scanScroll 8s linear infinite;
}
@keyframes scanScroll {
  from { background-position: 0 0; }
  to { background-position: 0 200px; }
}

/* HUD Crosshair Overlay */
.hud-crosshair {
  position: fixed; inset: 0; z-index: 9997;
  pointer-events: none;
  overflow: hidden;
}
.hud-crosshair .line {
  position: absolute;
  background: rgba(0, 170, 255, 0.04);
}
.hud-crosshair .h1 { width: 100%; height: 1px; top: 50%; }
.hud-crosshair .v1 { height: 100%; width: 1px; left: 50%; }
.hud-crosshair .h2 { width: 100%; height: 1px; top: 33%; background: rgba(0, 170, 255, 0.02); }
.hud-crosshair .h3 { width: 100%; height: 1px; top: 67%; background: rgba(0, 170, 255, 0.02); }
.hud-crosshair .v2 { height: 100%; width: 1px; left: 33%; background: rgba(0, 170, 255, 0.02); }
.hud-crosshair .v3 { height: 100%; width: 1px; left: 67%; background: rgba(0, 170, 255, 0.02); }

/* Warp Corruption Flash */
.warp-flash {
  position: fixed; inset: 0; z-index: 9996;
  pointer-events: none;
  background: radial-gradient(ellipse at center, rgba(136, 0, 255, 0.06), rgba(255, 0, 170, 0.03), transparent);
  opacity: 0;
  animation: warpFlash 18s ease-in-out infinite;
}
@keyframes warpFlash {
  0%, 90%, 100% { opacity: 0; }
  93% { opacity: 1; }
  95% { opacity: 0; }
  96% { opacity: 0.6; }
  98% { opacity: 0; }
}

/* Reality Crack Lines */
.reality-cracks {
  position: fixed; inset: 0; z-index: 9995;
  pointer-events: none;
}
.reality-crack {
  position: absolute;
  height: 1px;
  opacity: 0.12;
}
.reality-crack:nth-child(1) {
  width: 55%;
  top: 28%;
  left: 8%;
  transform: rotate(-12deg);
  background: linear-gradient(90deg, transparent, var(--warp-purple), var(--warp-green), transparent);
  animation: crackPulse 6s ease-in-out infinite;
}
.reality-crack:nth-child(2) {
  width: 40%;
  top: 62%;
  left: 35%;
  transform: rotate(10deg);
  background: linear-gradient(90deg, transparent, var(--warp-green), var(--warp-purple), transparent);
  animation: crackPulse 8s ease-in-out infinite 2s;
}
.reality-crack:nth-child(3) {
  width: 30%;
  top: 48%;
  left: 55%;
  transform: rotate(-25deg);
  background: linear-gradient(90deg, transparent, var(--warp-pink), var(--warp-green), transparent);
  animation: crackPulse 7s ease-in-out infinite 4s;
}
@keyframes crackPulse {
  0%, 100% { opacity: 0.08; }
  50% { opacity: 0.22; }
}

/* Eldritch Floating Symbols */
.eldritch-symbol {
  position: fixed;
  font-size: 52px;
  color: var(--warp-purple);
  opacity: 0.04;
  pointer-events: none;
  z-index: 9994;
  font-family: serif;
}
.eldritch-symbol.s1 {
  top: 18%;
  animation: eldritchDrift1 38s linear infinite;
}
.eldritch-symbol.s2 {
  top: 72%;
  animation: eldritchDrift2 45s linear infinite;
}
@keyframes eldritchDrift1 {
  0%   { left: -60px; transform: rotate(0deg); opacity: 0; }
  5%   { opacity: 0.05; }
  50%  { opacity: 0.04; }
  95%  { opacity: 0.05; }
  100% { left: calc(100vw + 60px); transform: rotate(180deg); opacity: 0; }
}
@keyframes eldritchDrift2 {
  0%   { left: calc(100vw + 60px); transform: rotate(0deg); opacity: 0; }
  5%   { opacity: 0.04; }
  50%  { opacity: 0.06; }
  95%  { opacity: 0.04; }
  100% { left: -60px; transform: rotate(-180deg); opacity: 0; }
}

/* --- STARFIELD & PARTICLE CANVASES --- */
#starfield-canvas {
  position: fixed; inset: 0; z-index: 0;
}
#particle-canvas {
  position: fixed; inset: 0; z-index: 4;
  pointer-events: none;
}

/* --- VIEWPORT SECTOR COORDINATES --- */
.viewport-coords {
  position: fixed;
  z-index: 10;
  font-family: var(--font-mono);
  font-size: 9px;
  color: var(--blue-dim);
  letter-spacing: 2px;
  pointer-events: none;
  text-transform: uppercase;
  opacity: 0.6;
  line-height: 1.6;
}
.coord-tl { top: 10px; left: 14px; }
.coord-tr { top: 10px; right: 14px; text-align: right; }
.coord-bl { bottom: 10px; left: 14px; }
.coord-br { bottom: 10px; right: 14px; text-align: right; }

/* --- MAIN PAGE LAYOUT --- */
.page-container {
  position: relative;
  z-index: 5;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 24px 20px 40px;
  gap: 28px;
}

/* ============================================================
   SECTION 1: MAIN MENU
   ============================================================ */
.main-menu-section {
  width: 100%;
  max-width: 680px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 16px;
  padding: 40px 20px 20px;
  position: relative;
  animation: sectionBootUp 1.0s ease-out both;
}
@keyframes sectionBootUp {
  0%   { opacity: 0; transform: translateY(30px); filter: brightness(2.5) blur(6px); }
  30%  { filter: brightness(1.5) blur(2px); }
  100% { opacity: 1; transform: translateY(0); filter: brightness(1) blur(0); }
}

/* Imperial Aquila Crest (replaces rose window) */
.aquila-crest {
  position: relative;
  width: 300px;
  height: 80px;
  margin-bottom: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 60px;
  color: var(--gold);
  text-shadow: 0 0 20px var(--gold-dim), 0 0 40px rgba(196,164,74,0.15), 0 2px 8px rgba(0,0,0,0.8);
  letter-spacing: 20px;
  filter: drop-shadow(0 0 6px rgba(196,164,74,0.3));
  animation: aquilaPulse 4s ease-in-out infinite;
}
.aquila-crest::before {
  content: '';
  position: absolute;
  top: 50%;
  left: -40px;
  right: -40px;
  height: 1px;
  background: linear-gradient(90deg, transparent, var(--gold-dim), var(--gold), var(--gold-dim), transparent);
  opacity: 0.3;
}
.aquila-crest::after {
  content: '';
  position: absolute;
  inset: -10px;
  border: 1px solid transparent;
  border-image: linear-gradient(90deg, transparent 10%, var(--gold-dim) 30%, var(--gold) 50%, var(--gold-dim) 70%, transparent 90%) 1;
  opacity: 0.2;
}
@keyframes aquilaPulse {
  0%, 100% { filter: drop-shadow(0 0 6px rgba(196,164,74,0.3)); }
  50% { filter: drop-shadow(0 0 14px rgba(196,164,74,0.5)); }
}

/* Ornate double-line border for panels */
.ornate-border { position: relative; }
.ornate-border::before {
  content: '';
  position: absolute;
  inset: -4px;
  border: 1px solid var(--gold-dim);
  opacity: 0.15;
  pointer-events: none;
}

/* Filigree horizontal rule */
.filigree-rule {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 6px 0;
  opacity: 0.35;
}
.filigree-rule .fili-line {
  flex: 1;
  max-width: 120px;
  height: 1px;
  background: linear-gradient(90deg, transparent, var(--gold), transparent);
}
.filigree-rule .fili-diamond {
  width: 6px; height: 6px;
  background: var(--gold);
  transform: rotate(45deg);
}
.filigree-rule .fili-cross {
  font-family: 'Cinzel', serif;
  font-size: 10px;
  color: var(--gold);
}

/* Panel inner filigree band */
.panel-filigree {
  width: 100%;
  height: 12px;
  background:
    repeating-linear-gradient(90deg, transparent 0px, transparent 14px, var(--gold-dim) 14px, var(--gold-dim) 15px);
  opacity: 0.08;
  margin: 4px 0;
}

/* Aquila watermark behind panel content */
.panel-watermark {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 120px;
  color: var(--gold);
  opacity: 0.02;
  pointer-events: none;
  font-family: serif;
  letter-spacing: 10px;
}

/* Title Container with Targeting Reticle Brackets */
.title-reticle-wrap {
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 28px 50px 18px;
}
.reticle-bracket {
  position: absolute;
  width: 28px;
  height: 28px;
  border-color: var(--blue-primary);
  border-style: solid;
  border-width: 0;
  opacity: 0.5;
  animation: reticleBreathe 3.5s ease-in-out infinite;
}
.reticle-tl { top: 0; left: 0; border-top-width: 2px; border-left-width: 2px; --dx: -1; --dy: -1; }
.reticle-tr { top: 0; right: 0; border-top-width: 2px; border-right-width: 2px; --dx: 1; --dy: -1; }
.reticle-bl { bottom: 0; left: 0; border-bottom-width: 2px; border-left-width: 2px; --dx: -1; --dy: 1; }
.reticle-br { bottom: 0; right: 0; border-bottom-width: 2px; border-right-width: 2px; --dx: 1; --dy: 1; }
@keyframes reticleBreathe {
  0%, 100% { opacity: 0.4; transform: translate(0, 0); }
  50% { opacity: 0.85; transform: translate(calc(var(--dx) * 5px), calc(var(--dy) * 5px)); }
}

/* Title — RGB SPLIT GLITCH */
.game-title {
  font-family: 'Playfair Display SC', 'Cinzel', serif;
  font-size: 58px;
  font-weight: 900;
  color: var(--gold);
  text-transform: uppercase;
  letter-spacing: 18px;
  text-align: center;
  position: relative;
  text-shadow:
    0 0 30px rgba(196, 164, 74, 0.5),
    0 0 60px rgba(196, 164, 74, 0.2),
    0 0 100px rgba(160, 130, 50, 0.15),
    0 2px 0 rgba(120, 100, 40, 0.8),
    0 4px 8px rgba(0, 0, 0, 0.8);
  animation: titleGlitchBurst 3.5s ease-in-out infinite;
}
/* RGB split ghost layers — gothic serif torn apart by sci-fi corruption */
.game-title::before,
.game-title::after {
  content: 'STELLAR SIEGE';
  position: absolute;
  top: 0; left: 0; right: 0; bottom: 0;
  overflow: hidden;
  mix-blend-mode: screen;
}
.game-title::before {
  color: #cc2020;
  z-index: -1;
  animation: rgbBefore 3.5s ease-in-out infinite;
  clip-path: polygon(0 0, 100% 0, 100% 33%, 60% 33%, 60% 50%, 100% 50%, 100% 66%, 0 66%);
  text-shadow: 0 0 20px rgba(180, 30, 30, 0.6);
}
.game-title::after {
  color: #ffe0a0;
  z-index: -1;
  animation: rgbAfter 3.5s ease-in-out infinite;
  clip-path: polygon(0 34%, 40% 34%, 40% 51%, 0 51%, 0 67%, 100% 67%, 100% 100%, 0 100%);
  text-shadow: 0 0 20px rgba(255, 200, 120, 0.5);
}
/* Aggressive RGB split — wider displacement, more skew, faster cycle */
@keyframes rgbBefore {
  0%, 70%, 100% { transform: translate(0); opacity: 0; }
  72% { transform: translate(-8px, -3px) skewX(-6deg); opacity: 0.8; }
  74% { transform: translate(10px, 2px) skewX(4deg); opacity: 0.9; }
  76% { transform: translate(-12px, -1px) skewX(-8deg); opacity: 0.7; }
  78% { transform: translate(6px, 3px) skewX(3deg); opacity: 0.6; }
  80% { transform: translate(-3px, 0) skewX(-1deg); opacity: 0.4; }
  82% { transform: translate(0); opacity: 0; }
  /* Second burst */
  90% { transform: translate(0); opacity: 0; }
  91% { transform: translate(-6px, -2px) skewX(-4deg); opacity: 0.7; }
  93% { transform: translate(8px, 1px) skewX(5deg); opacity: 0.5; }
  95% { transform: translate(0); opacity: 0; }
}
@keyframes rgbAfter {
  0%, 71%, 100% { transform: translate(0); opacity: 0; }
  73% { transform: translate(9px, 3px) skewX(7deg); opacity: 0.8; }
  75% { transform: translate(-11px, -2px) skewX(-5deg); opacity: 0.9; }
  77% { transform: translate(13px, 1px) skewX(9deg); opacity: 0.7; }
  79% { transform: translate(-5px, -3px) skewX(-3deg); opacity: 0.6; }
  81% { transform: translate(2px, 0) skewX(1deg); opacity: 0.4; }
  83% { transform: translate(0); opacity: 0; }
  /* Second burst */
  91% { transform: translate(0); opacity: 0; }
  92% { transform: translate(7px, 2px) skewX(5deg); opacity: 0.7; }
  94% { transform: translate(-9px, -1px) skewX(-4deg); opacity: 0.5; }
  96% { transform: translate(0); opacity: 0; }
}
/* Title body glitch — harder shakes, scan-line flicker, more frequent */
@keyframes titleGlitchBurst {
  0%, 68%, 100% { filter: none; transform: none; }
  70% { filter: hue-rotate(40deg) brightness(1.4); transform: skewX(-4deg) translateX(6px); }
  71% { filter: hue-rotate(-60deg) brightness(1.6) saturate(1.5); transform: skewX(5deg) translateX(-8px) scaleY(1.02); }
  72% { filter: invert(0.1) hue-rotate(30deg); transform: skewX(-7deg) translateX(10px) scaleX(1.01); }
  73% { filter: hue-rotate(-30deg) brightness(1.3); transform: skewX(3deg) translateX(-5px); }
  74% { filter: brightness(0.6); transform: translateY(2px); }
  75% { filter: hue-rotate(20deg) brightness(1.5); transform: skewX(-2deg) translateX(3px); }
  76% { filter: none; transform: translateX(-1px); }
  78% { filter: none; transform: none; }
  /* Quick micro-glitch */
  88% { filter: none; transform: none; }
  89% { filter: hue-rotate(50deg) brightness(1.3); transform: skewX(-3deg) translateX(4px); }
  90% { filter: hue-rotate(-40deg); transform: skewX(4deg) translateX(-6px); }
  91% { filter: brightness(0.7); transform: scaleY(0.98) translateY(1px); }
  92% { filter: none; transform: none; }
}

/* Scan-line overlay on title — flickers in sync with glitch bursts */
.title-scanlines {
  position: absolute;
  top: 0; left: -20px; right: -20px; bottom: 0;
  pointer-events: none;
  background: repeating-linear-gradient(
    0deg,
    transparent 0px,
    transparent 2px,
    rgba(196, 164, 74, 0.04) 2px,
    rgba(196, 164, 74, 0.04) 4px
  );
  opacity: 0;
  animation: scanFlicker 3.5s ease-in-out infinite;
  z-index: 2;
  mix-blend-mode: screen;
}
@keyframes scanFlicker {
  0%, 68%, 83%, 100% { opacity: 0; }
  70% { opacity: 0.8; }
  72% { opacity: 0.3; }
  74% { opacity: 1; }
  76% { opacity: 0.5; }
  78% { opacity: 0; }
  89% { opacity: 0; }
  90% { opacity: 0.6; }
  91% { opacity: 0.2; }
  92% { opacity: 0; }
}

/* Subtitle with flanking flourishes */
.game-subtitle {
  font-family: var(--font-heading);
  font-size: 15px;
  color: #a0b8cc;
  letter-spacing: 11px;
  text-transform: uppercase;
  margin-top: 2px;
  text-shadow: 0 0 12px rgba(120, 160, 200, 0.3);
  position: relative;
  padding: 0 40px;
}
.game-subtitle::before {
  content: '— ⚜ —';
  position: absolute;
  left: -80px;
  top: 50%;
  transform: translateY(-50%);
  font-size: 10px;
  opacity: 0.5;
  letter-spacing: 4px;
  text-shadow: 0 0 8px rgba(120, 160, 200, 0.3);
}
.game-subtitle::after {
  content: '— ⚜ —';
  position: absolute;
  right: -80px;
  top: 50%;
  transform: translateY(-50%);
  font-size: 10px;
  opacity: 0.5;
  letter-spacing: 4px;
  text-shadow: 0 0 8px rgba(120, 160, 200, 0.3);
}

/* Fleet ID */
.fleet-id {
  font-family: var(--font-mono);
  font-size: 9px;
  color: var(--blue-dim);
  letter-spacing: 3px;
  margin-top: 6px;
  opacity: 0.6;
}

/* Gothic Divider — ornate line with symbols */
.gothic-divider {
  display: flex;
  align-items: center;
  gap: 12px;
  width: 100%;
  max-width: 500px;
  margin: 4px 0;
}
.gothic-divider .line {
  flex: 1;
  height: 2px;
  background: linear-gradient(90deg, transparent, var(--gold-dim), var(--gold), var(--gold-dim), transparent);
  position: relative;
}
.gothic-divider .line::before {
  content: '';
  position: absolute;
  top: -2px; left: 10%; right: 10%;
  height: 6px;
  background: linear-gradient(90deg, transparent, rgba(196, 164, 74, 0.12), transparent);
}
.gothic-divider .line::after {
  content: '';
  position: absolute;
  top: 4px; left: 30%; right: 30%;
  height: 1px;
  background: linear-gradient(90deg, transparent, var(--gold-dim), transparent);
  opacity: 0.3;
}
.gothic-divider .sym {
  color: var(--gold);
  font-size: 16px;
  text-shadow: 0 0 8px var(--gold-dim), 0 0 20px rgba(196,164,74,0.15);
  opacity: 0.8;
  animation: aquilaPulse 4s ease-in-out infinite;
}

/* Organ Pipe Dividers — larger and more ornate */
.organ-pipes {
  display: flex;
  justify-content: center;
  align-items: flex-end;
  gap: 4px;
  padding: 12px 0;
  position: relative;
}
.organ-pipes::before, .organ-pipes::after {
  content: '✦';
  font-size: 8px;
  color: var(--gold);
  opacity: 0.35;
  align-self: center;
  margin: 0 8px;
}
.organ-pipe {
  width: 6px;
  background: linear-gradient(180deg, var(--gold), var(--gold-dim) 60%, #2a2a30);
  border-radius: 3px 3px 0 0;
  box-shadow: inset 1px 0 0 rgba(255,255,255,0.1), inset -1px 0 0 rgba(0,0,0,0.3);
  opacity: 0.35;
}
.organ-pipe:nth-child(2) { height: 18px; }
.organ-pipe:nth-child(3) { height: 28px; }
.organ-pipe:nth-child(4) { height: 36px; }
.organ-pipe:nth-child(5) { height: 42px; }
.organ-pipe:nth-child(6) { height: 36px; }
.organ-pipe:nth-child(7) { height: 28px; }
.organ-pipe:nth-child(8) { height: 18px; }

/* Menu Buttons */
.menu-buttons {
  display: flex;
  flex-direction: column;
  gap: 7px;
  width: 100%;
  max-width: 330px;
}
.menu-btn {
  font-family: var(--font-heading);
  font-size: 14px;
  font-weight: 700;
  letter-spacing: 4px;
  text-transform: uppercase;
  border: none;
  cursor: pointer;
  padding: 13px 24px;
  position: relative;
  overflow: hidden;
  transition: all 0.3s ease;
  clip-path: polygon(8px 0, 100% 0, calc(100% - 8px) 100%, 0 100%);
  background: linear-gradient(135deg, var(--steel-mid), var(--steel-light));
  color: var(--blue-primary);
  text-shadow: 0 0 8px rgba(0, 170, 255, 0.2);
}
/* Chevron sweep pattern on hover */
.menu-btn::before {
  content: '';
  position: absolute; inset: 0;
  background: repeating-linear-gradient(
    -60deg,
    transparent 0px, transparent 5px,
    rgba(0, 170, 255, 0.04) 5px, rgba(0, 170, 255, 0.04) 10px
  );
  transform: translateX(-110%);
  transition: transform 0.5s ease;
}
.menu-btn:hover::before { transform: translateX(0); }
/* Glow bar on left */
.menu-btn::after {
  content: '';
  position: absolute;
  top: 15%; left: 0; width: 2px; height: 70%;
  background: var(--blue-dim);
  transition: all 0.3s ease;
  box-shadow: 0 0 4px rgba(0, 170, 255, 0.2);
}
.menu-btn:hover {
  background: linear-gradient(135deg, var(--steel-light), var(--steel-highlight));
  color: var(--blue-glow);
  text-shadow: 0 0 16px rgba(0, 204, 255, 0.5);
  transform: scale(1.03);
  box-shadow: 0 0 20px rgba(0, 170, 255, 0.12), inset 0 0 15px rgba(0, 170, 255, 0.04);
}
.menu-btn:hover::after {
  background: var(--blue-primary);
  box-shadow: 0 0 10px rgba(0, 170, 255, 0.5);
}
.menu-btn:active { transform: scale(0.97); }

/* Primary (SKIRMISH) — Amber */
.menu-btn.primary {
  background: linear-gradient(135deg, var(--amber-dim), #5e4000);
  color: var(--amber-light);
  text-shadow: 0 0 8px rgba(255, 136, 0, 0.3);
  box-shadow: 0 0 12px rgba(255, 136, 0, 0.08);
}
.menu-btn.primary::after { background: var(--amber-dim); box-shadow: 0 0 4px rgba(255, 136, 0, 0.3); }
.menu-btn.primary:hover {
  background: linear-gradient(135deg, #6e5000, var(--amber-dim));
  color: var(--amber-glow);
  text-shadow: 0 0 20px rgba(255, 204, 68, 0.6);
  box-shadow: 0 0 30px rgba(255, 136, 0, 0.2), inset 0 0 15px rgba(255, 136, 0, 0.06);
}
.menu-btn.primary:hover::after { background: var(--amber); box-shadow: 0 0 10px rgba(255, 136, 0, 0.6); }

/* Corrupted (QUIT) — Warp Glitch */
.menu-btn.corrupted {
  animation: corruptedBtnGlitch 5s ease-in-out infinite;
}
.menu-btn.corrupted::after {
  background: var(--warp-purple) !important;
  opacity: 0.5;
  animation: corruptedStripe 2.5s ease-in-out infinite;
}
@keyframes corruptedBtnGlitch {
  0%, 88%, 100% { filter: none; }
  90% { filter: hue-rotate(50deg) brightness(1.15); }
  92% { filter: hue-rotate(-40deg); }
  94% { filter: hue-rotate(20deg); }
  96% { filter: none; }
}
@keyframes corruptedStripe {
  0%, 100% { opacity: 0.2; width: 2px; }
  50% { opacity: 0.7; width: 3px; }
}

/* Button Flourish Symbols */
.btn-flourish {
  font-size: 10px;
  color: var(--gold-dim);
  text-shadow: 0 0 6px rgba(196, 164, 74, 0.4);
  transition: all 0.3s ease;
  display: inline-block;
}
.menu-btn:hover .btn-flourish {
  color: var(--gold);
  text-shadow: 0 0 12px rgba(196, 164, 74, 0.7);
  transform: scale(1.3);
}
.menu-btn.primary .btn-flourish {
  color: var(--amber-dim);
  text-shadow: 0 0 6px rgba(255, 136, 0, 0.4);
}
.menu-btn.primary:hover .btn-flourish {
  color: var(--amber-light);
  text-shadow: 0 0 14px rgba(255, 204, 68, 0.7);
}
.btn-flourish.warp {
  color: var(--warp-purple);
  text-shadow: 0 0 6px rgba(150, 50, 255, 0.4);
  animation: warpFlourish 3s ease-in-out infinite;
}
@keyframes warpFlourish {
  0%, 100% { opacity: 0.6; }
  50% { opacity: 1; text-shadow: 0 0 10px rgba(150, 50, 255, 0.7); }
}

/* Menu Footer */
.menu-footer {
  font-family: var(--font-mono);
  font-size: 9px;
  color: var(--steel-bright);
  letter-spacing: 2px;
  margin-top: 4px;
  opacity: 0.6;
}

/* ============================================================
   SHARED PANEL SYSTEM
   Brushed metal with riveted edges, Gothic corners, triple border
   ============================================================ */
.panel {
  background: linear-gradient(175deg, var(--steel-mid) 0%, var(--steel-dark) 100%);
  border: 1px solid var(--steel-highlight);
  position: relative;
}
/* Outer ornate gold frame */
.panel::before {
  content: '';
  position: absolute;
  inset: -4px;
  border: 1px solid var(--gold-dim);
  pointer-events: none;
  opacity: 0.3;
}
/* Inner subtle glow line */
.panel::after {
  content: '';
  position: absolute;
  inset: 3px;
  border: 1px solid rgba(0, 170, 255, 0.06);
  pointer-events: none;
}

/* Panel Header with Alert Strip */
.panel-header {
  background: linear-gradient(90deg, var(--steel-dark), var(--steel-mid), var(--steel-dark));
  padding: 10px 18px;
  display: flex;
  align-items: center;
  gap: 12px;
  border-bottom: 1px solid var(--steel-highlight);
  position: relative;
}
/* Alert hazard strip */
.panel-header::before {
  content: '';
  position: absolute;
  bottom: -1px; left: 0; right: 0;
  height: 2px;
  background: repeating-linear-gradient(
    90deg,
    var(--amber) 0px, var(--amber) 10px,
    var(--steel-dark) 10px, var(--steel-dark) 20px
  );
  background-size: 200% 100%;
  animation: alertStripScroll 1.8s linear infinite;
}
@keyframes alertStripScroll {
  from { background-position: 0 0; }
  to { background-position: -40px 0; }
}
/* Warning Light */
.warning-light {
  width: 8px; height: 8px;
  border-radius: 50%;
  background: var(--amber);
  flex-shrink: 0;
  box-shadow: 0 0 6px var(--amber), 0 0 14px rgba(255, 136, 0, 0.25);
  animation: warningPulse 1.5s ease-in-out infinite;
}
@keyframes warningPulse {
  0%, 100% { opacity: 0.5; box-shadow: 0 0 4px var(--amber); }
  50% { opacity: 1; box-shadow: 0 0 10px var(--amber), 0 0 22px rgba(255, 136, 0, 0.4); }
}
.warning-light.fast { animation-duration: 0.8s; }
.warning-light.slow { animation-duration: 2.5s; }

.panel-header .title {
  font-family: var(--font-heading);
  font-size: 12px;
  font-weight: 700;
  color: var(--blue-primary);
  letter-spacing: 4px;
  text-transform: uppercase;
  flex: 1;
  position: relative;
  padding: 0 28px;
}
/* Flourish symbols flanking panel titles */
.panel-header .title::before {
  content: '✦ ';
  color: var(--gold);
  opacity: 0.5;
  font-size: 8px;
  position: absolute;
  left: 0;
  top: 50%;
  transform: translateY(-50%);
  text-shadow: 0 0 4px var(--gold-dim);
}
.panel-header .title::after {
  content: ' ✦';
  color: var(--gold);
  opacity: 0.5;
  font-size: 8px;
  position: absolute;
  right: 0;
  top: 50%;
  transform: translateY(-50%);
  text-shadow: 0 0 4px var(--gold-dim);
}
.panel-header .fleet-tag {
  font-family: var(--font-mono);
  font-size: 8px;
  color: var(--steel-bright);
  letter-spacing: 2px;
}
.panel-body { padding: 18px; }

/* Gothic Corner Flourishes — ornate L-shaped gold corners with inner detail */
.corner-flourish {
  position: absolute;
  width: 32px; height: 32px;
  pointer-events: none;
}
.corner-flourish::before, .corner-flourish::after {
  content: '';
  position: absolute;
  background: var(--gold);
}
/* Outer L */
.corner-flourish.tl { top: 4px; left: 4px; }
.corner-flourish.tl::before { width: 24px; height: 2px; top: 0; left: 0; box-shadow: 0 3px 0 rgba(196,164,74,0.15); }
.corner-flourish.tl::after  { width: 2px; height: 24px; top: 0; left: 0; box-shadow: 3px 0 0 rgba(196,164,74,0.15); }
.corner-flourish.tr { top: 4px; right: 4px; }
.corner-flourish.tr::before { width: 24px; height: 2px; top: 0; right: 0; box-shadow: 0 3px 0 rgba(196,164,74,0.15); }
.corner-flourish.tr::after  { width: 2px; height: 24px; top: 0; right: 0; box-shadow: -3px 0 0 rgba(196,164,74,0.15); }
.corner-flourish.bl { bottom: 4px; left: 4px; }
.corner-flourish.bl::before { width: 24px; height: 2px; bottom: 0; left: 0; box-shadow: 0 -3px 0 rgba(196,164,74,0.15); }
.corner-flourish.bl::after  { width: 2px; height: 24px; bottom: 0; left: 0; box-shadow: 3px 0 0 rgba(196,164,74,0.15); }
.corner-flourish.br { bottom: 4px; right: 4px; }
.corner-flourish.br::before { width: 24px; height: 2px; bottom: 0; right: 0; box-shadow: 0 -3px 0 rgba(196,164,74,0.15); }
.corner-flourish.br::after  { width: 2px; height: 24px; bottom: 0; right: 0; box-shadow: -3px 0 0 rgba(196,164,74,0.15); }
/* Diamond accent dot at each corner */
.corner-flourish .diamond {
  position: absolute;
  width: 5px; height: 5px;
  background: var(--gold);
  transform: rotate(45deg);
  opacity: 0.6;
}
.corner-flourish.tl .diamond { top: 0; left: 0; }
.corner-flourish.tr .diamond { top: 0; right: 0; }
.corner-flourish.bl .diamond { bottom: 0; left: 0; }
.corner-flourish.br .diamond { bottom: 0; right: 0; }

/* Flying Buttress Diagonal Supports — thicker, more visible */
.buttress-left, .buttress-right {
  position: absolute;
  top: 8%; width: 2px; height: 84%;
  opacity: 0.2;
  pointer-events: none;
}
.buttress-left {
  left: -10px;
  background: linear-gradient(180deg, transparent 5%, var(--gold-dim) 20%, var(--gold) 50%, var(--gold-dim) 80%, transparent 95%);
  transform: rotate(-1.5deg);
  box-shadow: 2px 0 8px rgba(196,164,74,0.08);
}
.buttress-right {
  right: -10px;
  background: linear-gradient(180deg, transparent 5%, var(--gold-dim) 20%, var(--gold) 50%, var(--gold-dim) 80%, transparent 95%);
  transform: rotate(1.5deg);
  box-shadow: -2px 0 8px rgba(196,164,74,0.08);
}
/* Buttress node dots */
.buttress-left::before, .buttress-right::before {
  content: '';
  position: absolute;
  top: 50%;
  width: 4px; height: 4px;
  background: var(--gold);
  border-radius: 50%;
  transform: translateY(-50%);
  opacity: 0.5;
}
.buttress-left::before { left: -1px; }
.buttress-right::before { right: -1px; }

/* Warp Border Flicker */
.warp-flicker-border { animation: borderFlicker 7s ease-in-out infinite; }
@keyframes borderFlicker {
  0%, 88%, 100% { border-color: var(--steel-highlight); }
  91% { border-color: rgba(136, 0, 255, 0.25); }
  93% { border-color: var(--steel-highlight); }
  95% { border-color: rgba(136, 0, 255, 0.15); }
  97% { border-color: var(--steel-highlight); }
}

/* Holographic Flicker */
.holo-flicker { animation: holoFlicker 4.5s step-end infinite; }
@keyframes holoFlicker {
  0%, 94%, 100% { opacity: 1; }
  95% { opacity: 0.7; }
  96% { opacity: 1; }
  97% { opacity: 0.85; }
  98% { opacity: 1; }
}

/* Gothic Arch on Panel Top — larger, more ornate */
.gothic-arch::before {
  content: '';
  position: absolute;
  top: -16px; left: 50%; transform: translateX(-50%);
  width: 100px; height: 16px;
  background: linear-gradient(180deg, var(--gold), var(--gold-dim));
  clip-path: polygon(0 100%, 10% 50%, 25% 18%, 40% 4%, 50% 0%, 60% 4%, 75% 18%, 90% 50%, 100% 100%);
  opacity: 0.45;
  filter: drop-shadow(0 -2px 6px rgba(196,164,74,0.2));
}
.gothic-arch::after {
  content: '✦';
  position: absolute;
  top: -22px; left: 50%; transform: translateX(-50%);
  font-size: 8px;
  color: var(--gold);
  opacity: 0.5;
}

/* ============================================================
   SECTION 2: UNIT CARDS / DECK BUILDER
   ============================================================ */
.deck-section {
  width: 100%;
  max-width: 1050px;
  animation: sectionBootUp 1.0s ease-out 0.15s both;
}

.unit-cards-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 12px;
}

/* Tactical Data-Slate Unit Card */
.unit-card {
  background: linear-gradient(170deg, #1d1d28 0%, #13131c 55%, #191924 100%);
  border: 1px solid var(--blue-dim);
  position: relative;
  overflow: hidden;
  transition: all 0.3s ease;
  cursor: pointer;
  animation: cardBoot 0.7s ease-out both;
}
.unit-card:nth-child(1) { animation-delay: 0.25s; }
.unit-card:nth-child(2) { animation-delay: 0.38s; }
.unit-card:nth-child(3) { animation-delay: 0.51s; }
.unit-card:nth-child(4) { animation-delay: 0.64s; }
@keyframes cardBoot {
  0%   { opacity: 0; transform: translateY(18px); filter: brightness(2.5); }
  50%  { filter: brightness(1.3); }
  100% { opacity: 1; transform: translateY(0); filter: brightness(1); }
}
/* Illuminated Manuscript Gold Inner Border */
.unit-card::before {
  content: '';
  position: absolute; inset: 3px;
  border: 1px solid var(--gold-dim);
  pointer-events: none;
  opacity: 0.3;
}
/* Holographic Scan Line */
.unit-card::after {
  content: '';
  position: absolute;
  top: -100%; left: 0; right: 0;
  height: 50%;
  background: linear-gradient(180deg, transparent, rgba(0, 170, 255, 0.025), transparent);
  animation: cardScan 4.5s linear infinite;
  pointer-events: none;
}
@keyframes cardScan {
  from { top: -50%; }
  to   { top: 150%; }
}
.unit-card:hover {
  border-color: var(--blue-primary);
  box-shadow: 0 0 20px rgba(0, 170, 255, 0.12), inset 0 0 12px rgba(0, 170, 255, 0.04);
  transform: translateY(-3px);
}
.unit-card.dimmed {
  opacity: 0.4;
  filter: saturate(0.25) brightness(0.85);
}
.unit-card.dimmed:hover {
  opacity: 0.55;
  filter: saturate(0.4) brightness(0.9);
}

/* Gold Corner Accents on Cards — ornate flourish corners */
.card-corner {
  position: absolute;
  width: 22px; height: 22px;
  pointer-events: none;
  color: var(--gold);
  font-size: 12px;
  text-shadow: 0 0 6px rgba(196, 164, 74, 0.5);
  opacity: 0.7;
  line-height: 1;
}
.card-corner::before {
  position: absolute;
}
.card-corner::after {
  content: '';
  position: absolute;
  background: var(--gold);
  opacity: 0.4;
}
.card-corner.tl { top: 3px; left: 3px; }
.card-corner.tl::before { content: '╔'; top: 0; left: 0; }
.card-corner.tl::after { width: 16px; height: 1px; top: 14px; left: 2px; background: linear-gradient(90deg, var(--gold), transparent); }
.card-corner.tr { top: 3px; right: 3px; }
.card-corner.tr::before { content: '╗'; top: 0; right: 0; }
.card-corner.tr::after { width: 16px; height: 1px; top: 14px; right: 2px; background: linear-gradient(-90deg, var(--gold), transparent); }
.card-corner.bl { bottom: 3px; left: 3px; }
.card-corner.bl::before { content: '╚'; bottom: 0; left: 0; }
.card-corner.bl::after { width: 16px; height: 1px; bottom: 14px; left: 2px; background: linear-gradient(90deg, var(--gold), transparent); }
.card-corner.br { bottom: 3px; right: 3px; }
.card-corner.br::before { content: '╝'; bottom: 0; right: 0; }
.card-corner.br::after { width: 16px; height: 1px; bottom: 14px; right: 2px; background: linear-gradient(-90deg, var(--gold), transparent); }

/* Card Inner Sections */
.card-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  padding: 10px 12px 8px;
  border-bottom: 1px solid rgba(196, 164, 74, 0.15);
  background: linear-gradient(180deg, rgba(196, 164, 74, 0.04), transparent);
  position: relative;
}
.card-header::after {
  content: '— ✦ —';
  position: absolute;
  bottom: -5px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 6px;
  color: var(--gold-dim);
  background: linear-gradient(170deg, #1d1d28, #13131c);
  padding: 0 8px;
  letter-spacing: 3px;
  text-shadow: 0 0 4px rgba(196, 164, 74, 0.3);
  z-index: 1;
}
.card-name {
  font-family: var(--font-heading);
  font-size: 11px;
  font-weight: 700;
  color: var(--blue-primary);
  letter-spacing: 2px;
  text-transform: uppercase;
  display: flex;
  align-items: center;
  gap: 6px;
}
.card-name::before, .card-name::after {
  content: '⚜';
  font-size: 8px;
  color: var(--gold-dim);
  text-shadow: 0 0 4px rgba(196, 164, 74, 0.3);
}
.card-cost {
  font-family: var(--font-mono);
  font-size: 10px;
  color: var(--amber);
  background: linear-gradient(135deg, rgba(255, 136, 0, 0.1), rgba(255, 136, 0, 0.04));
  padding: 3px 10px;
  border: 1px solid var(--amber-dim);
  clip-path: polygon(4px 0, 100% 0, calc(100% - 4px) 100%, 0 100%);
  text-shadow: 0 0 6px rgba(255, 136, 0, 0.3);
  position: relative;
}
.card-cost::before {
  content: '◈';
  font-size: 6px;
  margin-right: 3px;
  opacity: 0.6;
}
.card-category {
  font-family: var(--font-heading);
  font-size: 8px;
  font-weight: 700;
  color: var(--gold);
  letter-spacing: 3px;
  padding: 2px 8px;
  background: rgba(196, 164, 74, 0.08);
  border: 1px solid rgba(196, 164, 74, 0.15);
  margin-top: 2px;
  display: inline-block;
  text-shadow: 0 0 4px rgba(196, 164, 74, 0.2);
}
.card-category::before {
  content: '[ ';
  opacity: 0.4;
}
.card-category::after {
  content: ' ]';
  opacity: 0.4;
}
.card-stats {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1px 8px;
  padding: 7px 12px;
  position: relative;
}
.card-stats::before {
  content: '· · · · · · · · · · · · · · · · · · · ·';
  position: absolute;
  top: 0; left: 8px; right: 8px;
  font-size: 6px;
  color: var(--gold-dim);
  opacity: 0.3;
  letter-spacing: 2px;
  text-align: center;
  overflow: hidden;
  white-space: nowrap;
  height: 6px;
}
.stat-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 3px 4px;
  border-bottom: 1px solid rgba(196, 164, 74, 0.06);
  position: relative;
}
.stat-row::before {
  content: '›';
  position: absolute;
  left: -2px;
  font-size: 9px;
  color: var(--gold-dim);
  opacity: 0.5;
}
.stat-label {
  font-family: var(--font-heading);
  font-size: 8px;
  font-weight: 700;
  color: var(--gold);
  letter-spacing: 2px;
  text-shadow: 0 0 4px rgba(196, 164, 74, 0.2);
  display: flex;
  align-items: center;
  gap: 3px;
}
.stat-label::after {
  content: '—';
  font-size: 6px;
  color: var(--gold-dim);
  opacity: 0.4;
}
.stat-value {
  font-family: var(--font-mono);
  font-size: 12px;
  color: var(--cyan);
  text-shadow: 0 0 6px rgba(0, 255, 204, 0.3);
  position: relative;
}
.stat-value::before {
  content: '⟨';
  font-size: 8px;
  color: var(--gold-dim);
  opacity: 0.4;
  margin-right: 2px;
}
.stat-value::after {
  content: '⟩';
  font-size: 8px;
  color: var(--gold-dim);
  opacity: 0.4;
  margin-left: 2px;
}
.card-traits {
  display: flex;
  flex-wrap: wrap;
  gap: 5px;
  padding: 7px 12px 10px;
  border-top: 1px solid rgba(196, 164, 74, 0.12);
  position: relative;
}
.card-traits::before {
  content: '⚜';
  position: absolute;
  top: -5px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 7px;
  color: var(--gold-dim);
  background: var(--steel-dark);
  padding: 0 6px;
  text-shadow: 0 0 4px rgba(196, 164, 74, 0.3);
}
.trait-tag {
  font-family: var(--font-heading);
  font-size: 7px;
  font-weight: 700;
  color: var(--gold);
  background: linear-gradient(135deg, rgba(196, 164, 74, 0.08), rgba(196, 164, 74, 0.03));
  border: 1px solid rgba(196, 164, 74, 0.25);
  padding: 2px 8px;
  letter-spacing: 2px;
  text-transform: uppercase;
  text-shadow: 0 0 4px rgba(196, 164, 74, 0.2);
  position: relative;
  clip-path: polygon(4px 0, calc(100% - 4px) 0, 100% 50%, calc(100% - 4px) 100%, 4px 100%, 0 50%);
}
.trait-tag::before {
  content: '✦ ';
  font-size: 5px;
  opacity: 0.6;
}
.trait-tag::after {
  content: ' ✦';
  font-size: 5px;
  opacity: 0.6;
}

/* Deck Strip */
.deck-strip {
  margin-top: 12px;
  background: linear-gradient(90deg, var(--steel-dark), var(--steel-mid), var(--steel-dark));
  border: 1px solid var(--steel-highlight);
  padding: 9px 14px;
  display: flex;
  align-items: center;
  gap: 14px;
}
.deck-strip-label {
  font-family: var(--font-heading);
  font-size: 10px;
  color: var(--gold);
  letter-spacing: 3px;
  text-transform: uppercase;
  white-space: nowrap;
}
.deck-units { display: flex; gap: 6px; flex: 1; }
.deck-chip {
  font-family: var(--font-mono);
  font-size: 9px;
  color: var(--blue-primary);
  background: rgba(0, 170, 255, 0.05);
  border: 1px solid var(--blue-dim);
  padding: 3px 9px;
  clip-path: polygon(4px 0, 100% 0, calc(100% - 4px) 100%, 0 100%);
}
.deck-ap {
  font-family: var(--font-mono);
  font-size: 12px;
  white-space: nowrap;
}
.deck-ap .current { color: var(--amber); }
.deck-ap .max { color: var(--steel-bright); }

/* ============================================================
   SECTION 3: SETTINGS
   ============================================================ */
.settings-section {
  width: 100%;
  max-width: 520px;
  animation: sectionBootUp 1.0s ease-out 0.3s both;
}

.settings-grid {
  display: flex;
  flex-direction: column;
  gap: 18px;
}
.setting-row {
  display: flex;
  flex-direction: column;
  gap: 8px;
}
.setting-label {
  font-family: var(--font-heading);
  font-size: 11px;
  color: var(--blue-primary);
  letter-spacing: 3px;
  text-transform: uppercase;
  display: flex;
  align-items: center;
  gap: 8px;
}
.setting-label::before {
  content: '✦';
  font-size: 8px;
  color: var(--gold-dim);
  text-shadow: 0 0 4px rgba(196, 164, 74, 0.3);
}
.setting-label::after {
  content: '—';
  font-size: 8px;
  color: var(--gold-dim);
  opacity: 0.4;
  margin-left: -4px;
}
.setting-label .icon { color: var(--gold); font-size: 13px; }

/* Toggle Switch */
.toggle-row { display: flex; align-items: center; gap: 12px; }
.toggle-switch {
  width: 50px; height: 24px;
  background: var(--steel-dark);
  border: 1px solid var(--steel-highlight);
  border-radius: 3px;
  cursor: pointer;
  position: relative;
  transition: all 0.3s ease;
  clip-path: polygon(4px 0, 100% 0, calc(100% - 4px) 100%, 0 100%);
  flex-shrink: 0;
}
.toggle-switch.active {
  background: rgba(0, 170, 255, 0.12);
  border-color: var(--blue-primary);
  box-shadow: 0 0 10px rgba(0, 170, 255, 0.15);
}
.toggle-knob {
  position: absolute;
  top: 3px; left: 3px;
  width: 16px; height: 16px;
  background: var(--steel-bright);
  border-radius: 2px;
  transition: all 0.3s ease;
  box-shadow: 0 0 3px rgba(0, 0, 0, 0.4);
}
.toggle-switch.active .toggle-knob {
  left: 29px;
  background: var(--blue-primary);
  box-shadow: 0 0 8px rgba(0, 170, 255, 0.4);
}
.toggle-status {
  font-family: var(--font-mono);
  font-size: 10px;
  color: var(--steel-bright);
  letter-spacing: 2px;
  transition: color 0.3s ease;
}
.toggle-switch.active ~ .toggle-status { color: var(--blue-primary); }

/* Volume Slider */
.slider-row { display: flex; align-items: center; gap: 12px; }
.slider-track {
  flex: 1; height: 8px;
  background: var(--steel-dark);
  border: 1px solid var(--steel-highlight);
  position: relative;
  cursor: pointer;
  clip-path: polygon(3px 0, 100% 0, calc(100% - 3px) 100%, 0 100%);
}
.slider-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--blue-dark), var(--blue-primary));
  position: relative;
  transition: width 0.05s ease;
  box-shadow: 0 0 6px rgba(0, 170, 255, 0.15);
}
.slider-thumb {
  position: absolute;
  top: -5px; right: -7px;
  width: 12px; height: 18px;
  background: linear-gradient(180deg, var(--blue-primary), var(--blue-dark));
  border: 1px solid var(--blue-glow);
  cursor: grab;
  clip-path: polygon(50% 0, 100% 20%, 100% 100%, 0 100%, 0 20%);
  box-shadow: 0 0 6px rgba(0, 170, 255, 0.3);
}
.slider-thumb:active { cursor: grabbing; }
.slider-value {
  font-family: var(--font-mono);
  font-size: 14px;
  color: var(--blue-primary);
  min-width: 32px;
  text-align: right;
}

/* EQ Bars */
.eq-bars {
  display: flex; gap: 2px; align-items: flex-end; height: 26px;
  margin-top: 4px;
}
.eq-bar {
  width: 3px;
  background: linear-gradient(0deg, var(--blue-dark), var(--blue-primary), var(--cyan));
  border-radius: 1px 1px 0 0;
  animation: eqBounce var(--dur) ease-in-out infinite alternate;
}
@keyframes eqBounce {
  from { height: var(--min-h); }
  to   { height: var(--max-h); }
}

/* Dropdown */
.dropdown-wrap { position: relative; flex: 1; }
.dropdown-select {
  width: 100%;
  padding: 9px 14px;
  background: var(--steel-dark);
  border: 1px solid var(--steel-highlight);
  color: var(--blue-primary);
  font-family: var(--font-mono);
  font-size: 11px;
  letter-spacing: 1px;
  cursor: pointer;
  appearance: none;
  clip-path: polygon(6px 0, 100% 0, calc(100% - 6px) 100%, 0 100%);
  transition: all 0.3s ease;
}
.dropdown-select:hover, .dropdown-select:focus {
  border-color: var(--blue-primary);
  box-shadow: 0 0 8px rgba(0, 170, 255, 0.12);
  outline: none;
}
.dropdown-select option { background: var(--steel-dark); color: var(--blue-primary); }
.dropdown-arrow {
  position: absolute;
  right: 14px; top: 50%; transform: translateY(-50%);
  color: var(--blue-dim);
  pointer-events: none;
  font-size: 9px;
}

/* Signal Strength */
.signal-bars { display: flex; gap: 2px; align-items: flex-end; height: 16px; }
.signal-bar {
  width: 4px;
  background: var(--blue-primary);
  border-radius: 1px;
  transition: all 0.3s ease;
}
.signal-bar.off { background: var(--steel-highlight); box-shadow: none !important; }

/* ============================================================
   SECTION 4: BATTLE HUD
   ============================================================ */
.battle-section {
  width: 100%;
  max-width: 1050px;
  animation: sectionBootUp 1.0s ease-out 0.45s both;
}

/* Top Bar */
.hud-top-bar {
  display: grid;
  grid-template-columns: 1fr 2fr 1fr;
  gap: 10px;
  margin-bottom: 12px;
}
.hud-cell {
  background: linear-gradient(135deg, var(--steel-mid), var(--steel-dark));
  border: 1px solid var(--steel-highlight);
  padding: 9px 13px;
  position: relative;
}
.hud-cell::before {
  content: '┌─';
  position: absolute;
  top: 2px; left: 4px;
  font-size: 7px;
  color: var(--gold-dim);
  opacity: 0.4;
  line-height: 1;
}
.hud-cell::after {
  content: '─┘';
  position: absolute;
  bottom: 2px; right: 4px;
  font-size: 7px;
  color: var(--gold-dim);
  opacity: 0.4;
  line-height: 1;
}
.hud-label {
  font-family: var(--font-mono);
  font-size: 8px;
  color: var(--steel-bright);
  letter-spacing: 2px;
  text-transform: uppercase;
  margin-bottom: 3px;
  display: flex;
  align-items: center;
  gap: 4px;
}
.hud-label::before {
  content: '◆';
  font-size: 5px;
  color: var(--blue-dim);
  text-shadow: 0 0 3px rgba(0, 170, 255, 0.3);
}
.hud-label::after {
  content: '◆';
  font-size: 5px;
  color: var(--blue-dim);
  text-shadow: 0 0 3px rgba(0, 170, 255, 0.3);
}
.hud-big-number {
  font-family: var(--font-mono);
  font-size: 24px;
  letter-spacing: 2px;
}
.hud-big-number.amber { color: var(--amber); text-shadow: 0 0 10px rgba(255, 136, 0, 0.25); }
.hud-big-number.blue  { color: var(--blue-primary); text-shadow: 0 0 10px rgba(0, 170, 255, 0.25); }

/* Mechanical Digit animation helper */
.mech-digit {
  display: inline-block;
  transition: transform 0.12s ease, opacity 0.12s ease;
}

/* Score Panel */
.score-header {
  display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;
}
.score-team {
  font-family: var(--font-heading);
  font-size: 11px; letter-spacing: 3px; text-transform: uppercase;
  display: flex; align-items: center; gap: 4px;
}
.score-team::before, .score-team::after {
  content: '✦';
  font-size: 6px;
  color: var(--gold-dim);
  opacity: 0.5;
}
.score-team.blue { color: var(--blue-primary); }
.score-team.red  { color: var(--red); }
.score-vs {
  font-family: var(--font-heading);
  font-size: 9px; color: var(--gold); letter-spacing: 4px;
  text-shadow: 0 0 4px rgba(196, 164, 74, 0.2);
}
.score-values { display: flex; justify-content: space-between; margin-bottom: 5px; }
.score-num {
  font-family: var(--font-mono);
  font-size: 20px; letter-spacing: 1px;
}
.score-num.blue { color: var(--blue-primary); text-shadow: 0 0 8px rgba(0, 170, 255, 0.25); }
.score-num.red  { color: var(--red); text-shadow: 0 0 8px rgba(255, 34, 0, 0.25); }
.score-bar-wrap {
  height: 6px;
  background: var(--steel-dark);
  border: 1px solid rgba(58, 58, 66, 0.6);
  display: flex; overflow: hidden; border-radius: 1px;
}
.score-bar-fill {
  height: 100%;
  transition: width 1s ease;
  position: relative;
  overflow: hidden;
}
.score-bar-fill.blue { background: linear-gradient(90deg, var(--blue-dark), var(--blue-primary)); width: 62%; }
.score-bar-fill.red  { background: linear-gradient(90deg, var(--red), var(--red-dim)); width: 38%; }
.score-bar-fill::after {
  content: '';
  position: absolute; inset: 0;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
  animation: barShine 3s linear infinite;
}
@keyframes barShine {
  from { transform: translateX(-100%); }
  to   { transform: translateX(250%); }
}

/* Main HUD 3-Column */
.hud-main {
  display: grid;
  grid-template-columns: 210px 1fr 250px;
  gap: 10px;
  margin-bottom: 12px;
}

/* Radar / Auspex */
.radar-panel {
  background: linear-gradient(180deg, var(--steel-mid), var(--steel-dark));
  border: 1px solid var(--steel-highlight);
  padding: 10px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 7px;
}
.radar-label {
  font-family: var(--font-heading);
  font-size: 8px;
  font-weight: 700;
  color: var(--gold);
  letter-spacing: 3px;
  text-transform: uppercase;
  width: 100%;
  text-shadow: 0 0 4px rgba(196, 164, 74, 0.2);
  display: flex;
  align-items: center;
  gap: 4px;
}
.radar-label::before, .radar-label::after {
  content: '◆';
  font-size: 4px;
  color: var(--gold-dim);
  opacity: 0.5;
}
.radar-wrap {
  width: 176px; height: 176px;
  position: relative;
}
#radar-canvas {
  width: 176px; height: 176px;
  border-radius: 50%;
  border: 1px solid var(--blue-dim);
  box-shadow: 0 0 12px rgba(0, 170, 255, 0.08), inset 0 0 18px rgba(0, 0, 0, 0.5);
}
.radar-info {
  font-family: var(--font-mono);
  font-size: 7px;
  color: var(--steel-bright);
  letter-spacing: 1px;
  text-align: center;
  line-height: 1.7;
}

/* Battle Cogitator Log */
.cogitator-panel {
  background: linear-gradient(180deg, var(--steel-mid), var(--steel-dark));
  border: 1px solid var(--steel-highlight);
  display: flex;
  flex-direction: column;
}
.cogitator-head {
  padding: 7px 12px;
  border-bottom: 1px solid var(--steel-highlight);
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.cogitator-title {
  font-family: var(--font-heading);
  font-size: 8px;
  font-weight: 700;
  color: var(--gold);
  letter-spacing: 3px;
  text-transform: uppercase;
  text-shadow: 0 0 4px rgba(196, 164, 74, 0.2);
  display: flex;
  align-items: center;
  gap: 4px;
}
.cogitator-title::before {
  content: '⚜';
  font-size: 7px;
  color: var(--gold-dim);
  opacity: 0.5;
}
.cogitator-status {
  font-family: var(--font-mono);
  font-size: 7px;
  color: var(--cyan-dim);
  animation: statusBlink 2s step-end infinite;
}
@keyframes statusBlink {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.25; }
}
.cogitator-log {
  flex: 1;
  padding: 6px 10px;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  gap: 2px;
  max-height: 216px;
}
.log-entry {
  font-family: var(--font-mono);
  font-size: 9px;
  line-height: 1.4;
  padding: 2px 0;
  border-bottom: 1px solid rgba(42, 42, 48, 0.4);
  display: flex;
  gap: 6px;
  animation: logFade 0.4s ease-out both;
}
@keyframes logFade {
  from { opacity: 0; transform: translateX(-8px); }
  to   { opacity: 1; transform: translateX(0); }
}
.log-time { color: var(--steel-bright); white-space: nowrap; }
.log-msg { flex: 1; }
.log-msg.combat   { color: var(--red); }
.log-msg.movement { color: var(--blue-primary); }
.log-msg.capture  { color: var(--amber); }
.log-msg.system   { color: var(--cyan); }
.log-msg.warp     { color: var(--warp-purple); }

/* Unit Status Panel */
.unit-panel {
  background: linear-gradient(180deg, var(--steel-mid), var(--steel-dark));
  border: 1px solid var(--steel-highlight);
  padding: 10px;
  display: flex;
  flex-direction: column;
  gap: 7px;
}
.unit-head {
  display: flex; justify-content: space-between; align-items: center;
  padding-bottom: 5px;
  border-bottom: 1px solid var(--steel-highlight);
}
.unit-name {
  font-family: var(--font-heading);
  font-size: 11px;
  color: var(--blue-primary);
  letter-spacing: 3px;
  text-transform: uppercase;
  display: flex;
  align-items: center;
  gap: 5px;
}
.unit-name::before, .unit-name::after {
  content: '✦';
  font-size: 7px;
  color: var(--gold-dim);
  text-shadow: 0 0 4px rgba(196, 164, 74, 0.3);
}
.unit-cat {
  font-family: var(--font-heading);
  font-size: 8px;
  font-weight: 700;
  color: var(--gold);
  letter-spacing: 3px;
  padding: 2px 8px;
  background: rgba(196, 164, 74, 0.08);
  border: 1px solid rgba(196, 164, 74, 0.15);
  text-shadow: 0 0 4px rgba(196, 164, 74, 0.2);
}
.unit-cat::before { content: '[ '; opacity: 0.4; }
.unit-cat::after { content: ' ]'; opacity: 0.4; }

/* Status Bars */
.bar-group { display: flex; flex-direction: column; gap: 5px; }
.bar-row { display: flex; align-items: center; gap: 6px; }
.bar-label {
  font-family: var(--font-heading);
  font-size: 7px;
  font-weight: 700;
  color: var(--gold);
  letter-spacing: 2px;
  width: 38px;
  text-transform: uppercase;
  text-shadow: 0 0 4px rgba(196, 164, 74, 0.2);
  display: flex;
  align-items: center;
  gap: 2px;
}
.bar-label::before {
  content: '›';
  font-size: 8px;
  color: var(--gold-dim);
  opacity: 0.6;
}
.bar-track {
  flex: 1; height: 10px;
  background: var(--steel-dark);
  border: 1px solid rgba(58, 58, 66, 0.6);
  position: relative;
  overflow: hidden;
}
.bar-fill {
  height: 100%;
  position: relative;
  transition: width 0.5s ease;
}
.bar-fill.health { background: linear-gradient(90deg, #00aa44, #44cc66); width: 75%; }
.bar-fill.morale { background: linear-gradient(90deg, var(--amber-dim), var(--amber)); width: 60%; }
.bar-fill.ammo   { background: linear-gradient(90deg, var(--blue-dark), var(--blue-primary)); width: 66%; }
/* Animated energy flow */
.bar-fill::after {
  content: '';
  position: absolute; inset: 0;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
  animation: energyFlow 2.2s linear infinite;
}
@keyframes energyFlow {
  from { transform: translateX(-100%); }
  to   { transform: translateX(250%); }
}
.bar-value {
  font-family: var(--font-mono);
  font-size: 9px;
  color: var(--blue-primary);
  min-width: 40px;
  text-align: right;
}

/* Action Buttons 3x2 */
.action-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 4px;
  margin-top: 5px;
  position: relative;
}
.action-grid::before {
  content: '— ⚜ ORDERS ⚜ —';
  position: absolute;
  top: -12px;
  left: 50%;
  transform: translateX(-50%);
  font-family: var(--font-heading);
  font-size: 6px;
  font-weight: 700;
  color: var(--gold-dim);
  letter-spacing: 3px;
  white-space: nowrap;
  text-shadow: 0 0 4px rgba(196, 164, 74, 0.3);
}
.act-btn {
  font-family: var(--font-heading);
  font-size: 8px;
  font-weight: 700;
  letter-spacing: 2px;
  text-transform: uppercase;
  background: linear-gradient(180deg, var(--steel-light), var(--steel-mid));
  border: 1px solid rgba(196, 164, 74, 0.2);
  color: var(--gold);
  padding: 6px 3px;
  cursor: pointer;
  transition: all 0.2s ease;
  clip-path: polygon(5px 0, calc(100% - 5px) 0, 100% 50%, calc(100% - 5px) 100%, 5px 100%, 0 50%);
  text-shadow: 0 0 4px rgba(196, 164, 74, 0.2);
  position: relative;
}
.act-btn::before {
  content: '✦';
  font-size: 5px;
  margin-right: 3px;
  opacity: 0.5;
}
.act-btn::after {
  content: '✦';
  font-size: 5px;
  margin-left: 3px;
  opacity: 0.5;
}
.act-btn:hover {
  background: linear-gradient(180deg, var(--steel-highlight), var(--steel-light));
  border-color: var(--gold);
  color: var(--gold-light);
  text-shadow: 0 0 10px rgba(196, 164, 74, 0.5);
  box-shadow: 0 0 12px rgba(196, 164, 74, 0.12);
}
.act-btn.atk { border-color: var(--red-dim); color: var(--red); text-shadow: 0 0 4px rgba(255, 34, 0, 0.2); }
.act-btn.atk::before, .act-btn.atk::after { color: var(--red-dim); }
.act-btn.atk:hover { border-color: var(--red); box-shadow: 0 0 12px rgba(255, 34, 0, 0.15); }

/* Targeting Data Strip */
.targeting-strip {
  background: linear-gradient(90deg, var(--steel-dark), var(--steel-mid), var(--steel-dark));
  border: 1px solid var(--steel-highlight);
  padding: 7px 14px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 12px;
  flex-wrap: wrap;
}
.tgt-datum { display: flex; flex-direction: column; align-items: center; gap: 1px; }
.tgt-label {
  font-family: var(--font-mono);
  font-size: 7px;
  color: var(--steel-bright);
  letter-spacing: 2px;
  text-transform: uppercase;
}
.tgt-value {
  font-family: var(--font-mono);
  font-size: 12px;
  color: var(--cyan);
  letter-spacing: 1px;
}
.tgt-value.warn { color: var(--amber); }
.tgt-value.danger { color: var(--red); }

/* ============================================================
   SCORE GLITCH ANIMATION
   ============================================================ */
@keyframes dataGlitch {
  0%, 93%, 100% { transform: none; }
  94% { transform: translateX(1px); }
  95% { transform: translateX(-1px); filter: hue-rotate(30deg); }
  96% { transform: none; filter: none; }
}
.score-glitch { animation: dataGlitch 5s ease-in-out infinite; }

/* ============================================================
   RESPONSIVE
   ============================================================ */
@media (max-width: 900px) {
  .unit-cards-grid { grid-template-columns: repeat(2, 1fr); }
  .hud-main { grid-template-columns: 1fr; }
  .hud-top-bar { grid-template-columns: 1fr; }
}
@media (max-width: 600px) {
  .unit-cards-grid { grid-template-columns: 1fr; }
  .game-title { font-size: 30px; letter-spacing: 6px; }
  .game-subtitle { font-size: 12px; letter-spacing: 6px; }
}
</style>
</head>
<body>

<!-- ============================================================
     GLOBAL OVERLAY LAYERS
     ============================================================ -->
<canvas id="starfield-canvas"></canvas>
<canvas id="particle-canvas"></canvas>

<div class="crt-vignette"></div>
<div class="scan-lines"></div>
<div class="hud-crosshair">
  <div class="line h1"></div>
  <div class="line v1"></div>
  <div class="line h2"></div>
  <div class="line h3"></div>
  <div class="line v2"></div>
  <div class="line v3"></div>
</div>
<div class="warp-flash"></div>
<div class="reality-cracks">
  <div class="reality-crack"></div>
  <div class="reality-crack"></div>
  <div class="reality-crack"></div>
</div>
<span class="eldritch-symbol s1">&psi;</span>
<span class="eldritch-symbol s2">&Omega;</span>

<!-- Viewport Sector Coordinates -->
<div class="viewport-coords coord-tl" id="coord-tl">SECTOR 77-ALPHA // AZ 034.7<br>DECLINATION +12.4 // GRID 0x7F2A</div>
<div class="viewport-coords coord-tr" id="coord-tr">AUSPEX RANGE 40KM<br>VOID SHIELDS 98.2% // NOMINAL</div>
<div class="viewport-coords coord-bl">BATTLEFLEET OBSCURUS // BBG-7741<br>NAV-LOCK: ENGAGED</div>
<div class="viewport-coords coord-br" id="coord-br">WARP INTERFERENCE: 0.3%<br>GELLAR FIELD: STABLE</div>

<!-- ============================================================
     PAGE CONTENT
     ============================================================ -->
<div class="page-container">

  <!-- ========================================
       SECTION 1: MAIN MENU
       ======================================== -->
  <section class="main-menu-section">
    <div class="aquila-crest">⚜ ✠ ⚜</div>

    <div class="title-reticle-wrap">
      <div class="reticle-bracket reticle-tl"></div>
      <div class="reticle-bracket reticle-tr"></div>
      <div class="reticle-bracket reticle-bl"></div>
      <div class="reticle-bracket reticle-br"></div>
      <h1 class="game-title">Stellar Siege</h1>
      <div class="title-scanlines"></div>
      <p class="game-subtitle">Planetary Conflict</p>
    </div>

    <span class="fleet-id">BATTLEFLEET OBSCURUS // MANDATE 7741-SIGMA // CRUSADE AUTHORITY ACTIVE</span>

    <div class="gothic-divider">
      <div class="line"></div>
      <span class="sym">&#10016;</span>
      <span class="sym">&#9880;</span>
      <span class="sym">&#10016;</span>
      <div class="line"></div>
    </div>

    <div class="menu-buttons">
      <button class="menu-btn primary"><span class="btn-flourish">⚜</span> SKIRMISH <span class="btn-flourish">⚜</span></button>
      <button class="menu-btn"><span class="btn-flourish">✦</span> MULTIPLAYER <span class="btn-flourish">✦</span></button>
      <button class="menu-btn"><span class="btn-flourish">✦</span> DECK BUILDER <span class="btn-flourish">✦</span></button>
      <button class="menu-btn"><span class="btn-flourish">✦</span> SETTINGS <span class="btn-flourish">✦</span></button>
      <button class="menu-btn corrupted"><span class="btn-flourish warp">☠</span> QUIT <span class="btn-flourish warp">☠</span></button>
    </div>

    <div class="gothic-divider" style="margin-top:8px;">
      <div class="line"></div>
      <span class="sym">⚜</span>
      <span class="sym">†</span>
      <span class="sym">⚜</span>
      <div class="line"></div>
    </div>
    <span class="menu-footer">v0.5.0 &mdash; A-move Studios</span>
  </section>

  <div class="organ-pipes">
    <div class="organ-pipe"></div><div class="organ-pipe"></div><div class="organ-pipe"></div><div class="organ-pipe"></div>
    <div class="organ-pipe"></div>
    <div class="organ-pipe"></div><div class="organ-pipe"></div><div class="organ-pipe"></div><div class="organ-pipe"></div>
  </div>

  <!-- ========================================
       SECTION 2: UNIT CARDS / DECK BUILDER
       ======================================== -->
  <section class="deck-section">
    <div class="panel warp-flicker-border gothic-arch ornate-border" style="position:relative;">
      <div class="corner-flourish tl"><span class="diamond"></span></div>
      <div class="corner-flourish tr"><span class="diamond"></span></div>
      <div class="corner-flourish bl"><span class="diamond"></span></div>
      <div class="corner-flourish br"><span class="diamond"></span></div>
      <div class="buttress-left"></div>
      <div class="buttress-right"></div>

      <span class="panel-watermark">⚜</span>
      <div class="panel-header">
        <div class="warning-light"></div>
        <span class="title">Armoury Manifest</span>
        <span class="fleet-tag">DECK: ALPHA-PRIME</span>
      </div>
      <div class="filigree-rule"><div class="fili-line"></div><span class="fili-cross">✦</span><span class="fili-diamond"></span><span class="fili-cross">✦</span><div class="fili-line"></div></div>
      <div class="panel-body">
        <div class="unit-cards-grid">

          <!-- Card 1: Engineer -->
          <div class="unit-card holo-flicker">
            <div class="card-corner tl"></div><div class="card-corner tr"></div>
            <div class="card-corner bl"></div><div class="card-corner br"></div>
            <div class="card-header">
              <div>
                <div class="card-name">Engineer</div>
                <span class="card-category">LOG</span>
              </div>
              <span class="card-cost">35 AP</span>
            </div>
            <div class="card-stats">
              <div class="stat-row"><span class="stat-label">HP</span><span class="stat-value">80</span></div>
              <div class="stat-row"><span class="stat-label">SPD</span><span class="stat-value">6</span></div>
              <div class="stat-row"><span class="stat-label">ARM</span><span class="stat-value">1</span></div>
              <div class="stat-row"><span class="stat-label">RNG</span><span class="stat-value">30</span></div>
            </div>
            <div class="card-traits">
              <span class="trait-tag">Capture</span>
              <span class="trait-tag">Repair</span>
              <span class="trait-tag">Supply</span>
            </div>
          </div>

          <!-- Card 2: Stormtrooper -->
          <div class="unit-card">
            <div class="card-corner tl"></div><div class="card-corner tr"></div>
            <div class="card-corner bl"></div><div class="card-corner br"></div>
            <div class="card-header">
              <div>
                <div class="card-name">Stormtrooper</div>
                <span class="card-category">INF</span>
              </div>
              <span class="card-cost">35 AP</span>
            </div>
            <div class="card-stats">
              <div class="stat-row"><span class="stat-label">HP</span><span class="stat-value">100</span></div>
              <div class="stat-row"><span class="stat-label">SPD</span><span class="stat-value">5</span></div>
              <div class="stat-row"><span class="stat-label">ARM</span><span class="stat-value">3</span></div>
              <div class="stat-row"><span class="stat-label">RNG</span><span class="stat-value">50</span></div>
            </div>
            <div class="card-traits">
              <span class="trait-tag">Assault</span>
              <span class="trait-tag">Carapace</span>
            </div>
          </div>

          <!-- Card 3: HWT Lascannon -->
          <div class="unit-card">
            <div class="card-corner tl"></div><div class="card-corner tr"></div>
            <div class="card-corner bl"></div><div class="card-corner br"></div>
            <div class="card-header">
              <div>
                <div class="card-name">HWT Lascannon</div>
                <span class="card-category">INF</span>
              </div>
              <span class="card-cost">40 AP</span>
            </div>
            <div class="card-stats">
              <div class="stat-row"><span class="stat-label">HP</span><span class="stat-value">80</span></div>
              <div class="stat-row"><span class="stat-label">SPD</span><span class="stat-value">3</span></div>
              <div class="stat-row"><span class="stat-label">ARM</span><span class="stat-value">2</span></div>
              <div class="stat-row"><span class="stat-label">RNG</span><span class="stat-value">120</span></div>
            </div>
            <div class="card-traits">
              <span class="trait-tag">Anti-Tank</span>
              <span class="trait-tag">Heavy</span>
              <span class="trait-tag">Static</span>
            </div>
          </div>

          <!-- Card 4: Trooper (DIMMED) -->
          <div class="unit-card dimmed">
            <div class="card-corner tl"></div><div class="card-corner tr"></div>
            <div class="card-corner bl"></div><div class="card-corner br"></div>
            <div class="card-header">
              <div>
                <div class="card-name">Trooper</div>
                <span class="card-category">INF</span>
              </div>
              <span class="card-cost">20 AP</span>
            </div>
            <div class="card-stats">
              <div class="stat-row"><span class="stat-label">HP</span><span class="stat-value">60</span></div>
              <div class="stat-row"><span class="stat-label">SPD</span><span class="stat-value">5</span></div>
              <div class="stat-row"><span class="stat-label">ARM</span><span class="stat-value">1</span></div>
              <div class="stat-row"><span class="stat-label">RNG</span><span class="stat-value">40</span></div>
            </div>
            <div class="card-traits">
              <span class="trait-tag">Line</span>
              <span class="trait-tag">Conscript</span>
            </div>
          </div>
        </div>

        <!-- Deck Strip -->
        <div class="deck-strip">
          <span class="deck-strip-label">&#9876; Active Deck</span>
          <div class="deck-units">
            <span class="deck-chip">Engineer</span>
            <span class="deck-chip">Stormtrooper</span>
          </div>
          <span class="deck-ap"><span class="current">70</span><span class="max"> / 50 AP</span></span>
        </div>
      </div>
    </div>
  </section>

  <div class="organ-pipes">
    <div class="organ-pipe"></div><div class="organ-pipe"></div><div class="organ-pipe"></div><div class="organ-pipe"></div>
    <div class="organ-pipe"></div>
    <div class="organ-pipe"></div><div class="organ-pipe"></div><div class="organ-pipe"></div><div class="organ-pipe"></div>
  </div>

  <!-- ========================================
       SECTION 3: SETTINGS
       ======================================== -->
  <section class="settings-section">
    <div class="panel warp-flicker-border gothic-arch ornate-border" style="position:relative;">
      <div class="corner-flourish tl"><span class="diamond"></span></div>
      <div class="corner-flourish tr"><span class="diamond"></span></div>
      <div class="corner-flourish bl"><span class="diamond"></span></div>
      <div class="corner-flourish br"><span class="diamond"></span></div>
      <div class="buttress-left"></div>
      <div class="buttress-right"></div>

      <span class="panel-watermark">✠</span>
      <div class="panel-header">
        <div class="warning-light slow"></div>
        <span class="title">Cogitator Settings</span>
        <span class="fleet-tag">SYS-CONFIG</span>
      </div>
      <div class="filigree-rule"><div class="fili-line"></div><span class="fili-cross">⚜</span><span class="fili-diamond"></span><span class="fili-cross">⚜</span><div class="fili-line"></div></div>
      <div class="panel-body">
        <div class="settings-grid">

          <!-- Toggle: Fullscreen -->
          <div class="setting-row">
            <label class="setting-label"><span class="icon">&#9881;</span> Fullscreen</label>
            <div class="toggle-row">
              <div class="toggle-switch" id="toggle-fs">
                <div class="toggle-knob"></div>
              </div>
              <span class="toggle-status" id="toggle-fs-label">OFF</span>
            </div>
          </div>

          <!-- Slider: Master Volume -->
          <div class="setting-row">
            <label class="setting-label"><span class="icon">&#9835;</span> Master Volume</label>
            <div class="slider-row">
              <div class="slider-track" id="vol-track">
                <div class="slider-fill" id="vol-fill" style="width:70%;">
                  <div class="slider-thumb" id="vol-thumb"></div>
                </div>
              </div>
              <span class="slider-value" id="vol-val">70</span>
            </div>
            <div class="eq-bars" id="eq-container"></div>
          </div>

          <!-- Dropdown: Graphics Quality -->
          <div class="setting-row">
            <label class="setting-label"><span class="icon">&#9670;</span> Graphics Quality</label>
            <div style="display:flex; align-items:center; gap:12px;">
              <div class="dropdown-wrap">
                <select class="dropdown-select" id="gfx-quality">
                  <option value="low">LOW - Minimal Rendering</option>
                  <option value="medium">MEDIUM - Balanced Fidelity</option>
                  <option value="high" selected>HIGH - Full Purity</option>
                  <option value="ultra">ULTRA - Machine Spirit Unleashed</option>
                </select>
                <span class="dropdown-arrow">&#9660;</span>
              </div>
              <div class="signal-bars" id="signal-bars">
                <div class="signal-bar" style="height:4px"></div>
                <div class="signal-bar" style="height:7px"></div>
                <div class="signal-bar" style="height:10px"></div>
                <div class="signal-bar" style="height:13px"></div>
                <div class="signal-bar" style="height:16px"></div>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>
  </section>

  <div class="organ-pipes">
    <div class="organ-pipe"></div><div class="organ-pipe"></div><div class="organ-pipe"></div><div class="organ-pipe"></div>
    <div class="organ-pipe"></div>
    <div class="organ-pipe"></div><div class="organ-pipe"></div><div class="organ-pipe"></div><div class="organ-pipe"></div>
  </div>

  <!-- ========================================
       SECTION 4: BATTLE HUD
       ======================================== -->
  <section class="battle-section">
    <div class="panel warp-flicker-border gothic-arch ornate-border" style="position:relative;">
      <div class="corner-flourish tl"><span class="diamond"></span></div>
      <div class="corner-flourish tr"><span class="diamond"></span></div>
      <div class="corner-flourish bl"><span class="diamond"></span></div>
      <div class="corner-flourish br"><span class="diamond"></span></div>
      <div class="buttress-left"></div>
      <div class="buttress-right"></div>

      <span class="panel-watermark">⚔</span>
      <div class="panel-header">
        <div class="warning-light fast"></div>
        <span class="title">Tactical Cogitator &mdash; Battle HUD</span>
        <span class="fleet-tag">ENGAGEMENT ACTIVE</span>
      </div>
      <div class="filigree-rule"><div class="fili-line"></div><span class="fili-cross">✠</span><span class="fili-diamond"></span><span class="fili-cross">✠</span><div class="fili-line"></div></div>
      <div class="panel-body">

        <!-- Top Bar: Credits / Score / Timer -->
        <div class="hud-top-bar">
          <div class="hud-cell">
            <div class="hud-label">Requisition</div>
            <div class="hud-big-number amber" id="credit-display">
              <span class="mech-digit">1</span><span class="mech-digit">5</span><span class="mech-digit">8</span><span class="mech-digit">0</span>
            </div>
          </div>

          <div class="hud-cell">
            <div class="score-header">
              <span class="score-team blue">BLU</span>
              <span class="score-vs">VS</span>
              <span class="score-team red">RED</span>
            </div>
            <div class="score-values">
              <span class="score-num blue score-glitch" id="score-blue">1240</span>
              <span class="score-num red score-glitch" id="score-red">760</span>
            </div>
            <div class="score-bar-wrap">
              <div class="score-bar-fill blue" id="bar-blue"></div>
              <div class="score-bar-fill red" id="bar-red"></div>
            </div>
          </div>

          <div class="hud-cell" style="text-align:right;">
            <div class="hud-label" style="text-align:right;">Engagement Timer</div>
            <div class="hud-big-number blue" id="battle-timer">12:47</div>
          </div>
        </div>

        <!-- Main: Radar / Log / Unit Status -->
        <div class="hud-main">

          <!-- Radar -->
          <div class="radar-panel">
            <span class="radar-label">&#9673; Auspex Array</span>
            <div class="radar-wrap">
              <canvas id="radar-canvas" width="352" height="352"></canvas>
            </div>
            <div class="radar-info">
              SWEEP RATE: 4.2s // CONTACTS: 7<br>
              MODE: ACTIVE SCAN // FREQ: 2.4GHz
            </div>
          </div>

          <!-- Battle Cogitator Log -->
          <div class="cogitator-panel holo-flicker">
            <div class="cogitator-head">
              <span class="cogitator-title">&#9646; Battle Cogitator</span>
              <span class="cogitator-status">RECORDING</span>
            </div>
            <div class="cogitator-log" id="cog-log"></div>
          </div>

          <!-- Unit Status -->
          <div class="unit-panel">
            <div class="unit-head">
              <span class="unit-name">Stormtrooper</span>
              <span class="unit-cat">INF</span>
            </div>
            <div class="bar-group">
              <div class="bar-row">
                <span class="bar-label">HP</span>
                <div class="bar-track"><div class="bar-fill health"></div></div>
                <span class="bar-value">75/100</span>
              </div>
              <div class="bar-row">
                <span class="bar-label">MRL</span>
                <div class="bar-track"><div class="bar-fill morale"></div></div>
                <span class="bar-value">60/100</span>
              </div>
              <div class="bar-row">
                <span class="bar-label">AMMO</span>
                <div class="bar-track"><div class="bar-fill ammo"></div></div>
                <span class="bar-value">8/12</span>
              </div>
            </div>
            <div class="action-grid">
              <button class="act-btn">Move</button>
              <button class="act-btn atk">Attack</button>
              <button class="act-btn">Hold</button>
              <button class="act-btn">Reverse</button>
              <button class="act-btn">Fast Mv</button>
              <button class="act-btn">Atk-Mv</button>
            </div>
          </div>
        </div>

        <!-- Targeting Data Strip -->
        <div class="targeting-strip">
          <div class="tgt-datum">
            <span class="tgt-label">Range</span>
            <span class="tgt-value" id="tgt-range">847m</span>
          </div>
          <div class="tgt-datum">
            <span class="tgt-label">Bearing</span>
            <span class="tgt-value" id="tgt-bearing">034.7&deg;</span>
          </div>
          <div class="tgt-datum">
            <span class="tgt-label">Elevation</span>
            <span class="tgt-value" id="tgt-elev">+12.4m</span>
          </div>
          <div class="tgt-datum">
            <span class="tgt-label">Wind</span>
            <span class="tgt-value" id="tgt-wind">NNW 3.2</span>
          </div>
          <div class="tgt-datum">
            <span class="tgt-label">Threat</span>
            <span class="tgt-value warn" id="tgt-threat">MODERATE</span>
          </div>
          <div class="tgt-datum">
            <span class="tgt-label">Solution</span>
            <span class="tgt-value" id="tgt-solution">LOCKED</span>
          </div>
          <div class="tgt-datum">
            <span class="tgt-label">Pen Rating</span>
            <span class="tgt-value" id="tgt-pen">AP-4</span>
          </div>
        </div>

      </div>
    </div>
  </section>

</div><!-- end .page-container -->


<!-- ============================================================
     JAVASCRIPT — All canvas rendering, animation, interaction
     ============================================================ -->
<script>
/* ==============================================================
   1. STARFIELD + PLANET (Canvas @ 60fps)
   ============================================================== */
(function() {
  const cv = document.getElementById('starfield-canvas');
  const ctx = cv.getContext('2d');
  let W, H;
  function resize() { W = cv.width = innerWidth; H = cv.height = innerHeight; }
  resize();
  addEventListener('resize', resize);

  // 3 parallax layers of stars
  const layers = [
    { count: 180, speed: 0.015, szMin: 0.3, szMax: 0.9, alpha: 0.35 },
    { count: 90,  speed: 0.04,  szMin: 0.5, szMax: 1.4, alpha: 0.55 },
    { count: 40,  speed: 0.09,  szMin: 0.8, szMax: 2.2, alpha: 0.85 }
  ];
  const stars = [];
  for (const L of layers) {
    for (let i = 0; i < L.count; i++) {
      const hue = Math.random();
      let col = '#fff';
      if (hue > 0.92) col = '#aaccff';
      else if (hue > 0.84) col = '#ffccaa';
      else if (hue > 0.80) col = '#ffdddd';
      stars.push({
        x: Math.random() * 3000, y: Math.random() * 3000,
        sz: L.szMin + Math.random() * (L.szMax - L.szMin),
        spd: L.speed,
        a: L.alpha * (0.4 + Math.random() * 0.6),
        tw: 0.4 + Math.random() * 2.5,
        to: Math.random() * 6.28,
        col
      });
    }
  }

  // Planet params — slow orbital drift around center point
  const P = { cx: 0.72, cy: 0.62, rFrac: 0.17, orbitRadius: 0.03, orbitSpeed: 0.00004 };

  function drawRingBack(px, py, r, tilt) {
    // Draw the back half of Saturn ring (behind the planet)
    ctx.save();
    ctx.translate(px, py);
    ctx.scale(1, tilt);
    const ringInner = r * 1.3;
    const ringOuter = r * 2.0;
    // Ring bands (back half: PI to 2PI)
    for (let band = 0; band < 5; band++) {
      const ri = ringInner + (ringOuter - ringInner) * (band / 5);
      const ro = ringInner + (ringOuter - ringInner) * ((band + 1) / 5);
      const alpha = [0.06, 0.1, 0.04, 0.09, 0.05][band];
      const hue = [210, 220, 200, 215, 225][band];
      ctx.beginPath();
      ctx.arc(0, 0, (ri + ro) / 2, Math.PI, Math.PI * 2);
      ctx.strokeStyle = `hsla(${hue}, 40%, 55%, ${alpha})`;
      ctx.lineWidth = (ro - ri) * 0.8;
      ctx.stroke();
    }
    // Subtle sparkle on back ring
    ctx.beginPath();
    ctx.arc(0, 0, ringInner + (ringOuter - ringInner) * 0.5, Math.PI * 1.1, Math.PI * 1.9);
    ctx.strokeStyle = 'rgba(160, 200, 255, 0.03)';
    ctx.lineWidth = (ringOuter - ringInner) * 0.2;
    ctx.stroke();
    ctx.restore();
  }

  function drawRingFront(px, py, r, tilt) {
    // Draw the front half of Saturn ring (in front of the planet)
    ctx.save();
    ctx.translate(px, py);
    ctx.scale(1, tilt);
    const ringInner = r * 1.3;
    const ringOuter = r * 2.0;
    // Ring bands (front half: 0 to PI)
    for (let band = 0; band < 5; band++) {
      const ri = ringInner + (ringOuter - ringInner) * (band / 5);
      const ro = ringInner + (ringOuter - ringInner) * ((band + 1) / 5);
      const alpha = [0.08, 0.14, 0.06, 0.12, 0.07][band];
      const hue = [210, 220, 200, 215, 225][band];
      ctx.beginPath();
      ctx.arc(0, 0, (ri + ro) / 2, 0, Math.PI);
      ctx.strokeStyle = `hsla(${hue}, 40%, 60%, ${alpha})`;
      ctx.lineWidth = (ro - ri) * 0.8;
      ctx.stroke();
    }
    // Bright edge highlight on front ring
    ctx.beginPath();
    ctx.arc(0, 0, ringInner, 0.1, Math.PI - 0.1);
    ctx.strokeStyle = 'rgba(120, 180, 255, 0.1)';
    ctx.lineWidth = 1;
    ctx.stroke();
    ctx.beginPath();
    ctx.arc(0, 0, ringOuter, 0.05, Math.PI - 0.05);
    ctx.strokeStyle = 'rgba(100, 160, 255, 0.06)';
    ctx.lineWidth = 0.8;
    ctx.stroke();
    ctx.restore();
  }

  function drawPlanet(t) {
    // Slow orbital movement
    const orbitAngle = t * P.orbitSpeed;
    const px = W * (P.cx + Math.sin(orbitAngle) * P.orbitRadius);
    const py = H * (P.cy + Math.cos(orbitAngle * 0.7) * P.orbitRadius * 0.5);
    const r = Math.min(W, H) * P.rFrac;
    const ringTilt = 0.3; // Ring tilt (0 = edge-on, 1 = face-on)

    // Draw back ring (behind planet)
    drawRingBack(px, py, r, ringTilt);

    // Atmo glow
    const g1 = ctx.createRadialGradient(px, py, r * 0.85, px, py, r * 1.7);
    g1.addColorStop(0, 'rgba(40,100,255,0.07)');
    g1.addColorStop(0.6, 'rgba(20,60,180,0.02)');
    g1.addColorStop(1, 'transparent');
    ctx.fillStyle = g1;
    ctx.fillRect(px - r * 2, py - r * 2, r * 4, r * 4);

    // Planet body
    ctx.save();
    ctx.beginPath();
    ctx.arc(px, py, r, 0, Math.PI * 2);
    ctx.clip();

    const bg = ctx.createLinearGradient(px - r, py - r, px + r, py + r);
    bg.addColorStop(0, '#1a2a48');
    bg.addColorStop(0.35, '#0e1c38');
    bg.addColorStop(0.65, '#14284a');
    bg.addColorStop(1, '#091428');
    ctx.fillStyle = bg;
    ctx.fillRect(px - r, py - r, r * 2, r * 2);

    // Cloud bands
    for (let i = 0; i < 7; i++) {
      const by = py - r + (r * 2 * (i + 0.5)) / 7;
      ctx.fillStyle = `rgba(90,130,200,${0.03 + Math.sin(t * 0.0008 + i * 1.1) * 0.015})`;
      ctx.fillRect(px - r + Math.sin(t * 0.00002 + i * 1.7) * r * 0.12, by, r * 2, r * 0.1);
    }

    // Terminator (day/night boundary)
    const tg = ctx.createLinearGradient(px - r * 0.2, py, px + r, py);
    tg.addColorStop(0, 'transparent');
    tg.addColorStop(0.55, 'rgba(0,0,0,0.5)');
    tg.addColorStop(1, 'rgba(0,0,0,0.88)');
    ctx.fillStyle = tg;
    ctx.fillRect(px - r, py - r, r * 2, r * 2);

    // Ring shadow on planet surface (cast by front ring)
    const shadowY = py - r * ringTilt * 0.3;
    ctx.fillStyle = 'rgba(0,0,0,0.15)';
    ctx.fillRect(px - r, shadowY - r * 0.08, r * 2, r * 0.16);

    ctx.restore();

    // Rim highlight
    ctx.beginPath();
    ctx.arc(px, py, r, 0, Math.PI * 2);
    ctx.strokeStyle = 'rgba(60,120,255,0.12)';
    ctx.lineWidth = 1.5;
    ctx.stroke();

    // Draw front ring (in front of planet)
    drawRingFront(px, py, r, ringTilt);
  }

  function frame(t) {
    ctx.clearRect(0, 0, W, H);
    // Deep space BG
    const bg = ctx.createRadialGradient(W * 0.5, H * 0.35, 0, W * 0.5, H * 0.35, Math.max(W, H));
    bg.addColorStop(0, '#090914');
    bg.addColorStop(0.5, '#050510');
    bg.addColorStop(1, '#020208');
    ctx.fillStyle = bg;
    ctx.fillRect(0, 0, W, H);

    // Stars
    for (const s of stars) {
      const tw = 0.5 + 0.5 * Math.sin(t * 0.001 * s.tw + s.to);
      const x = ((s.x + t * s.spd * 0.08) % (W + 20)) - 10;
      const y = s.y % H;
      ctx.globalAlpha = s.a * tw;
      ctx.beginPath();
      ctx.arc(x, y, s.sz * tw, 0, Math.PI * 2);
      ctx.fillStyle = s.col;
      ctx.fill();
    }
    ctx.globalAlpha = 1;
    drawPlanet(t);
    requestAnimationFrame(frame);
  }
  requestAnimationFrame(frame);
})();

/* ==============================================================
   2. PARTICLE EFFECTS (Canvas @ 60fps)
   ============================================================== */
(function() {
  const cv = document.getElementById('particle-canvas');
  const ctx = cv.getContext('2d');
  let W, H;
  function resize() { W = cv.width = innerWidth; H = cv.height = innerHeight; }
  resize();
  addEventListener('resize', resize);

  const P = [];
  const N = 35;
  const colors = [
    [0, 170, 255],  // blue
    [0, 170, 255],
    [255, 136, 0],  // amber
    [196, 164, 74], // gold
    [0, 255, 204],  // cyan
  ];

  for (let i = 0; i < N; i++) {
    const c = colors[Math.floor(Math.random() * colors.length)];
    P.push({
      x: Math.random() * 2000,
      y: Math.random() * 2000,
      sz: 0.4 + Math.random() * 1.8,
      vx: (Math.random() - 0.5) * 0.25,
      vy: -(0.15 + Math.random() * 0.55),
      a: 0.08 + Math.random() * 0.25,
      c,
      life: Math.random()
    });
  }

  function frame() {
    ctx.clearRect(0, 0, W, H);
    for (const p of P) {
      p.x += p.vx;
      p.y += p.vy;
      p.life += 0.0018;
      if (p.y < -10 || p.life > 1) {
        p.x = Math.random() * W;
        p.y = H + 10;
        p.life = 0;
      }
      const al = p.a * Math.sin(p.life * Math.PI);
      const x = ((p.x % W) + W) % W;
      // Core
      ctx.beginPath();
      ctx.arc(x, p.y, p.sz, 0, Math.PI * 2);
      ctx.fillStyle = `rgba(${p.c[0]},${p.c[1]},${p.c[2]},${al.toFixed(3)})`;
      ctx.fill();
      // Glow
      ctx.beginPath();
      ctx.arc(x, p.y, p.sz * 3.5, 0, Math.PI * 2);
      ctx.fillStyle = `rgba(${p.c[0]},${p.c[1]},${p.c[2]},${(al * 0.12).toFixed(4)})`;
      ctx.fill();
    }
    requestAnimationFrame(frame);
  }
  requestAnimationFrame(frame);
})();

/* ==============================================================
   3. RADAR / AUSPEX DISPLAY (Canvas @ 60fps)
   ============================================================== */
(function() {
  const cv = document.getElementById('radar-canvas');
  const ctx = cv.getContext('2d');
  const S = 352;
  const cx = S / 2, cy = S / 2, maxR = S / 2 - 12;
  let angle = 0;

  const blips = [
    { r: 0.28, a: 0.7, t: 'f' },
    { r: 0.48, a: 2.0, t: 'f' },
    { r: 0.68, a: 3.4, t: 'e' },
    { r: 0.42, a: 4.1, t: 'e' },
    { r: 0.58, a: 4.9, t: 'f' },
    { r: 0.78, a: 1.1, t: 'e' },
    { r: 0.33, a: 5.7, t: 'f' },
  ];
  const bAlpha = blips.map(() => 0);

  function frame() {
    ctx.clearRect(0, 0, S, S);

    // BG
    const bg = ctx.createRadialGradient(cx, cy, 0, cx, cy, maxR);
    bg.addColorStop(0, '#0a0e14');
    bg.addColorStop(1, '#050810');
    ctx.fillStyle = bg;
    ctx.beginPath();
    ctx.arc(cx, cy, maxR, 0, Math.PI * 2);
    ctx.fill();

    // Grid rings
    ctx.strokeStyle = 'rgba(0,170,255,0.1)';
    ctx.lineWidth = 0.5;
    for (let i = 1; i <= 4; i++) {
      ctx.beginPath();
      ctx.arc(cx, cy, maxR * i / 4, 0, Math.PI * 2);
      ctx.stroke();
    }
    // Cross
    ctx.beginPath();
    ctx.moveTo(cx - maxR, cy); ctx.lineTo(cx + maxR, cy);
    ctx.moveTo(cx, cy - maxR); ctx.lineTo(cx, cy + maxR);
    ctx.strokeStyle = 'rgba(0,170,255,0.05)';
    ctx.stroke();
    // Diagonals
    const d = maxR * 0.707;
    ctx.beginPath();
    ctx.moveTo(cx - d, cy - d); ctx.lineTo(cx + d, cy + d);
    ctx.moveTo(cx + d, cy - d); ctx.lineTo(cx - d, cy + d);
    ctx.strokeStyle = 'rgba(0,170,255,0.03)';
    ctx.stroke();

    // Sweep
    angle += 0.018;
    const sa = angle % (Math.PI * 2);

    // Trail
    ctx.save();
    ctx.beginPath();
    ctx.moveTo(cx, cy);
    ctx.arc(cx, cy, maxR, sa - 0.55, sa);
    ctx.closePath();
    const sg = ctx.createConicGradient(sa - 0.55, cx, cy);
    sg.addColorStop(0, 'rgba(0,170,255,0)');
    sg.addColorStop(0.75, 'rgba(0,170,255,0.05)');
    sg.addColorStop(1, 'rgba(0,170,255,0.14)');
    ctx.fillStyle = sg;
    ctx.fill();
    ctx.restore();

    // Sweep line
    ctx.beginPath();
    ctx.moveTo(cx, cy);
    ctx.lineTo(cx + Math.cos(sa) * maxR, cy + Math.sin(sa) * maxR);
    ctx.strokeStyle = 'rgba(0,170,255,0.45)';
    ctx.lineWidth = 1.5;
    ctx.stroke();

    // Blips
    for (let i = 0; i < blips.length; i++) {
      const b = blips[i];
      const bx = cx + Math.cos(b.a) * b.r * maxR;
      const by = cy + Math.sin(b.a) * b.r * maxR;
      const diff = ((sa - b.a) % (Math.PI * 2) + Math.PI * 2) % (Math.PI * 2);
      if (diff < 0.12 && diff > 0) bAlpha[i] = 1;
      bAlpha[i] = Math.max(0, bAlpha[i] - 0.007);
      if (bAlpha[i] > 0.01) {
        const c = b.t === 'f' ? '0,170,255' : '255,34,0';
        ctx.beginPath();
        ctx.arc(bx, by, 3, 0, Math.PI * 2);
        ctx.fillStyle = `rgba(${c},${bAlpha[i].toFixed(2)})`;
        ctx.fill();
        ctx.beginPath();
        ctx.arc(bx, by, 8, 0, Math.PI * 2);
        ctx.fillStyle = `rgba(${c},${(bAlpha[i] * 0.15).toFixed(3)})`;
        ctx.fill();
      }
    }

    // Center
    ctx.beginPath();
    ctx.arc(cx, cy, 2.5, 0, Math.PI * 2);
    ctx.fillStyle = 'rgba(0,170,255,0.75)';
    ctx.fill();

    // Outer ring
    ctx.beginPath();
    ctx.arc(cx, cy, maxR, 0, Math.PI * 2);
    ctx.strokeStyle = 'rgba(0,170,255,0.18)';
    ctx.lineWidth = 1;
    ctx.stroke();

    requestAnimationFrame(frame);
  }
  requestAnimationFrame(frame);
})();

/* ==============================================================
   4. BATTLE COGITATOR LOG (Scrolling Entries)
   ============================================================== */
(function() {
  const log = document.getElementById('cog-log');

  const initial = [
    { t: '00:12:47', m: 'Stormtrooper Sq. Alpha engaged hostile armour', c: 'combat' },
    { t: '00:12:44', m: 'Zone SIGMA-3 capture progress: 67%', c: 'capture' },
    { t: '00:12:41', m: 'HWT Lascannon repositioning to grid 0xA3F2', c: 'movement' },
    { t: '00:12:38', m: 'Auspex contact: 3 hostile units NNE 1200m', c: 'system' },
    { t: '00:12:35', m: 'Engineer Sq. repairing fortification Delta-7', c: 'capture' },
    { t: '00:12:31', m: 'Warp anomaly detected in sector 14-GAMMA', c: 'warp' },
    { t: '00:12:28', m: 'Hostile artillery fire -- suppression on Sq. Bravo', c: 'combat' },
    { t: '00:12:24', m: 'Reinforcement requisition processed: +10 credits', c: 'system' },
    { t: '00:12:20', m: 'Trooper Sq. morale critical -- routing imminent', c: 'combat' },
    { t: '00:12:17', m: 'Zone OMEGA-1 secured by Engineer Sq. Alpha', c: 'capture' },
    { t: '00:12:14', m: 'Gellar field fluctuation detected -- 0.3% deviation', c: 'warp' },
    { t: '00:12:10', m: 'Air strike vector confirmed -- ordnance inbound', c: 'combat' },
  ];

  function addEntry(e) {
    const div = document.createElement('div');
    div.className = 'log-entry';
    div.innerHTML = `<span class="log-time">${e.t}</span><span class="log-msg ${e.c}">${e.m}</span>`;
    log.prepend(div);
    while (log.children.length > 13) log.removeChild(log.lastChild);
  }

  // Populate
  [...initial].reverse().forEach((e, i) => setTimeout(() => addEntry(e), i * 250));

  // Pool of random messages
  const pool = {
    combat: [
      'Stormtrooper Sq. destroyed hostile Chimera',
      'HWT Lascannon firing -- target acquired',
      'Suppression fire on grid 0xBB41',
      'Hostile infantry advancing sector 12',
      'Anti-tank round deflected -- armour holding',
      'Heavy bolter emplacement destroyed',
      'Close-quarters engagement -- casualties mounting',
    ],
    system: [
      'Requisition tick: +10 credits',
      'Auspex sweep complete -- 4 contacts',
      'Comm-link stable -- latency 12ms',
      'Void shield capacitors nominal',
      'Orbital relay confirming telemetry',
    ],
    capture: [
      'Zone DELTA-2 contested -- 3v2',
      'Engineer progressing capture: 34%',
      'Zone ALPHA lost to hostile forces',
      'Control point fortified -- defence bonus active',
    ],
    movement: [
      'Movement order confirmed -- Sq. relocating',
      'Fast move executed -- crossing open ground',
      'Reverse maneuver -- breaking contact',
    ],
    warp: [
      'Minor warp disturbance -- no action required',
      'Gellar field holding at 99.7%',
      'Psychic echo detected -- origin unknown',
      'Warp signature fluctuating at bearing 270',
    ]
  };
  const types = Object.keys(pool);

  let sec = 767;
  setInterval(() => {
    sec++;
    const mm = String(Math.floor(sec / 60)).padStart(2, '0');
    const ss = String(sec % 60).padStart(2, '0');
    const type = types[Math.floor(Math.random() * types.length)];
    const msgs = pool[type];
    addEntry({ t: `00:${mm}:${ss}`, m: msgs[Math.floor(Math.random() * msgs.length)], c: type });
  }, 2800);
})();

/* ==============================================================
   5. TIMER (Counts Up in Real-Time)
   ============================================================== */
(function() {
  const el = document.getElementById('battle-timer');
  let total = 12 * 60 + 47;
  setInterval(() => {
    total++;
    el.textContent = String(Math.floor(total / 60)).padStart(2, '0') + ':' + String(total % 60).padStart(2, '0');
  }, 1000);
})();

/* ==============================================================
   6. CREDIT COUNTER (Mechanical Digit Animation)
   ============================================================== */
(function() {
  const el = document.getElementById('credit-display');
  let credits = 1580;
  setInterval(() => {
    credits += 10;
    const digits = String(credits).split('');
    const spans = el.querySelectorAll('.mech-digit');
    if (digits.length !== spans.length) {
      el.innerHTML = digits.map(d => `<span class="mech-digit">${d}</span>`).join('');
    } else {
      for (let i = 0; i < spans.length; i++) {
        if (spans[i].textContent !== digits[i]) {
          const sp = spans[i];
          sp.style.transform = 'translateY(-5px)';
          sp.style.opacity = '0.4';
          setTimeout(() => {
            sp.textContent = digits[i];
            sp.style.transform = 'translateY(0)';
            sp.style.opacity = '1';
          }, 90);
        }
      }
    }
  }, 4000);
})();

/* ==============================================================
   7. SCORE SCRAMBLE (Warp Glitch on Digits)
   ============================================================== */
(function() {
  const blueEl = document.getElementById('score-blue');
  const redEl = document.getElementById('score-red');
  const barBlue = document.getElementById('bar-blue');
  const barRed = document.getElementById('bar-red');
  let bScore = 1240, rScore = 760;

  function scramble(el, final) {
    const str = String(final);
    let tick = 0;
    const iv = setInterval(() => {
      el.textContent = str.split('').map((d, i) => tick > i * 2 ? d : Math.floor(Math.random() * 10)).join('');
      tick++;
      if (tick > 10) { clearInterval(iv); el.textContent = str; }
    }, 35);
  }

  setInterval(() => {
    bScore = Math.min(2000, bScore + 5 + Math.floor(Math.random() * 12));
    rScore = Math.min(2000, rScore + 3 + Math.floor(Math.random() * 8));
    scramble(blueEl, bScore);
    scramble(redEl, rScore);
    const total = bScore + rScore;
    barBlue.style.width = (bScore / total * 100).toFixed(1) + '%';
    barRed.style.width = (rScore / total * 100).toFixed(1) + '%';
  }, 5500);
})();

/* ==============================================================
   8. SETTINGS INTERACTIVITY
   ============================================================== */

// Toggle
document.getElementById('toggle-fs').addEventListener('click', function() {
  this.classList.toggle('active');
  document.getElementById('toggle-fs-label').textContent = this.classList.contains('active') ? 'ON' : 'OFF';
});

// Volume Slider (Draggable)
(function() {
  const track = document.getElementById('vol-track');
  const fill = document.getElementById('vol-fill');
  const val = document.getElementById('vol-val');
  let dragging = false;

  function update(cx) {
    const rect = track.getBoundingClientRect();
    let pct = Math.max(0, Math.min(1, (cx - rect.left) / rect.width));
    fill.style.width = (pct * 100) + '%';
    val.textContent = Math.round(pct * 100);
  }

  track.addEventListener('mousedown', e => { dragging = true; update(e.clientX); });
  document.getElementById('vol-thumb').addEventListener('mousedown', e => { dragging = true; e.preventDefault(); });
  addEventListener('mousemove', e => { if (dragging) update(e.clientX); });
  addEventListener('mouseup', () => dragging = false);
  // Touch
  track.addEventListener('touchstart', e => { dragging = true; update(e.touches[0].clientX); }, { passive: true });
  addEventListener('touchmove', e => { if (dragging) update(e.touches[0].clientX); }, { passive: true });
  addEventListener('touchend', () => dragging = false);
})();

// EQ Bars
(function() {
  const c = document.getElementById('eq-container');
  for (let i = 0; i < 16; i++) {
    const b = document.createElement('div');
    b.className = 'eq-bar';
    const lo = 3 + Math.random() * 4;
    const hi = 10 + Math.random() * 16;
    b.style.setProperty('--min-h', lo + 'px');
    b.style.setProperty('--max-h', hi + 'px');
    b.style.setProperty('--dur', (0.25 + Math.random() * 0.45) + 's');
    b.style.height = lo + 'px';
    c.appendChild(b);
  }
})();

// Graphics Quality Dropdown -> Signal Bars
(function() {
  const sel = document.getElementById('gfx-quality');
  const bars = document.querySelectorAll('#signal-bars .signal-bar');
  const map = { low: 1, medium: 2, high: 4, ultra: 5 };

  function update() {
    const lvl = map[sel.value] || 3;
    bars.forEach((b, i) => {
      if (i < lvl) {
        b.classList.remove('off');
        b.style.background = 'var(--blue-primary)';
        b.style.boxShadow = '0 0 4px rgba(0,170,255,0.3)';
      } else {
        b.classList.add('off');
        b.style.background = 'var(--steel-highlight)';
        b.style.boxShadow = 'none';
      }
    });
  }
  sel.addEventListener('change', update);
  update();
})();

/* ==============================================================
   9. TARGETING DATA STRIP (Live Updates)
   ============================================================== */
(function() {
  const els = {
    range: document.getElementById('tgt-range'),
    bearing: document.getElementById('tgt-bearing'),
    elev: document.getElementById('tgt-elev'),
    wind: document.getElementById('tgt-wind'),
    threat: document.getElementById('tgt-threat'),
    solution: document.getElementById('tgt-solution'),
    pen: document.getElementById('tgt-pen'),
  };
  const dirs = ['N','NNE','NE','ENE','E','ESE','SE','NNW','NW','WNW','W','SSW','SW'];
  const threats = [
    { t: 'LOW', c: '' },
    { t: 'MODERATE', c: 'warn' },
    { t: 'HIGH', c: 'warn' },
    { t: 'CRITICAL', c: 'danger' }
  ];
  const solutions = ['LOCKED','TRACKING','ACQUIRING','LOCKED','LOCKED'];

  setInterval(() => {
    els.range.textContent = (350 + Math.floor(Math.random() * 900)) + 'm';
    els.bearing.innerHTML = (Math.random() * 360).toFixed(1) + '&deg;';
    const ev = (Math.random() * 35 - 5).toFixed(1);
    els.elev.textContent = (parseFloat(ev) >= 0 ? '+' : '') + ev + 'm';
    els.wind.textContent = dirs[Math.floor(Math.random() * dirs.length)] + ' ' + (0.8 + Math.random() * 6).toFixed(1);
    const th = threats[Math.floor(Math.random() * threats.length)];
    els.threat.textContent = th.t;
    els.threat.className = 'tgt-value' + (th.c ? ' ' + th.c : '');
    els.solution.textContent = solutions[Math.floor(Math.random() * solutions.length)];
    els.pen.textContent = 'AP-' + (2 + Math.floor(Math.random() * 7));
  }, 2300);
})();

/* ==============================================================
   10. VIEWPORT COORD UPDATES
   ============================================================== */
(function() {
  const tl = document.getElementById('coord-tl');
  const tr = document.getElementById('coord-tr');
  const br = document.getElementById('coord-br');

  setInterval(() => {
    const az = (Math.random() * 360).toFixed(1);
    const dec = (Math.random() * 90 - 45).toFixed(1);
    const grid = '0x' + Math.floor(Math.random() * 65535).toString(16).toUpperCase().padStart(4, '0');
    tl.innerHTML = `SECTOR 77-ALPHA // AZ ${az}<br>DECLINATION ${dec >= 0 ? '+' : ''}${dec} // GRID ${grid}`;

    const rng = (35 + Math.random() * 10).toFixed(0);
    const sh = (97 + Math.random() * 2.8).toFixed(1);
    tr.innerHTML = `AUSPEX RANGE ${rng}KM<br>VOID SHIELDS ${sh}% // NOMINAL`;

    const wp = (Math.random() * 0.9).toFixed(1);
    br.innerHTML = `WARP INTERFERENCE: ${wp}%<br>GELLAR FIELD: ${parseFloat(wp) > 0.5 ? 'FLUCTUATING' : 'STABLE'}`;
  }, 5500);
})();

/* ==============================================================
   11. WARP BORDER FLICKER RANDOMIZATION
   ============================================================== */
(function() {
  document.querySelectorAll('.warp-flicker-border').forEach((el, i) => {
    el.style.animationDelay = (i * 2.1) + 's';
    el.style.animationDuration = (5 + Math.random() * 4) + 's';
  });
})();

/* ==============================================================
   12. HOLOGRAPHIC FLICKER RANDOMIZATION
   ============================================================== */
(function() {
  document.querySelectorAll('.holo-flicker').forEach((el, i) => {
    el.style.animationDelay = (i * 1.6) + 's';
    el.style.animationDuration = (3 + Math.random() * 3.5) + 's';
  });
})();

/* ==============================================================
   13. CARD SCAN LINE STAGGER
   ============================================================== */
(function() {
  const style = document.createElement('style');
  let css = '';
  for (let i = 1; i <= 4; i++) {
    css += `.unit-card:nth-child(${i})::after{animation-delay:${(i - 1) * 1.1}s;animation-duration:${3.5 + Math.random() * 2}s;}`;
  }
  style.textContent = css;
  document.head.appendChild(style);
})();

</script>
</body>
</html>
